function toggleElement(n){var t=$(n).attr("toggleElementName"),i;if(t&&t!=""){if(i=parseFloat($(n).attr("price")),i>0){$("[toggleName='"+t+"']").show();return}$("[toggleName='"+t+"']").hide()}}window.PriceCalculator===undefined&&(window.PriceCalculator=function(){var n=this,f="onPriceCalculatorRefresh",i="controller",r="controlledby",c="onupdatehandler",u="price",l=/[-|\w]+/ig,t=null,a=function(n,t){if(n.tagName.toLowerCase()=="select"){$(n).change(t);return}if(n.tagName.toLowerCase()=="input"&&n.type=="checkbox"){$(n).click(t);return}if(n.tagName.toLowerCase()=="input"&&n.type=="radio"){$(n).change(t);return}if(n.tagName.toLowerCase()=="input"&&n.type=="hidden"){$(n).change(t);return}},v=function(n){n.tagName.toLowerCase()=="select"&&y(n);n.tagName.toLowerCase()=="input"&&n.type=="checkbox"&&w(n);n.tagName.toLowerCase()=="input"&&n.type=="hidden"&&b(n);n.tagName.toLowerCase()=="input"&&n.type=="radio"&&p(n)},y=function(t){if(!t.initialized){t.totalDelta||(t.totalDelta=0);var i=$(t.options[t.selectedIndex]).attr(u);t.currentPrice=i;t.getChangedPrice=function(){return $(this.options[this.selectedIndex]).attr(u)};$(t).change(function(){var t=this.getChangedPrice(),i=n.parseFloatNumber(t),r=n.parseFloatNumber(this.currentPrice);this.currentPrice=t;this.delta=i-r;this.totalDelta=this.totalDelta+this.delta});t.initialized=!0}},p=function(t){if(!t.initialized){t.totalDelta||(t.totalDelta=0);var i=$(t).attr("controller");t.currentPrice=$(":radio[controller='"+i+"']:checked").length==0?0:$(":radio[controller='"+i+"']:checked").attr("price");t.changeCurrentPrice=function(n){i=$(t).attr("controller");$(":radio[controller='"+i+"']").each(function(){this.currentPrice=n})};t.getChangedPrice=function(){var n=$(this).attr("checked");return n?$(this).attr(u):"0"};$(t).change(function(){var t=this.getChangedPrice(),i=n.parseFloatNumber(t),r=n.parseFloatNumber(this.currentPrice);this.changeCurrentPrice(t);this.delta=i-r;this.totalDelta=this.totalDelta+this.delta});t.initialized=!0}},w=function(t){if(!t.initialized){t.totalDelta||(t.totalDelta=0);var i="0",r=$(t).attr("checked");r&&(i=$(t).attr(u));t.currentPrice=i;t.getChangedPrice=function(){var n=$(this).attr("checked");return n?$(this).attr(u):"0"};$(t).click(function(){var t=this.getChangedPrice(),i=n.parseFloatNumber(t),r=n.parseFloatNumber(this.currentPrice);this.currentPrice=t;this.delta=i-r;this.totalDelta=this.totalDelta+this.delta});t.initialized=!0}},b=function(t){if(!t.initialized){t.totalDelta||(t.totalDelta=0);var i=t.value;t.currentPrice=i;(i==null||i=="")&&(t.currentPrice="0",t.value="0");t.getChangedPrice=function(){return this.value};$(t).change(function(){var t=this.getChangedPrice(),i=n.parseFloatNumber(t),r=n.parseFloatNumber(this.currentPrice);this.currentPrice=t;this.delta=i-r;this.totalDelta=this.totalDelta+this.delta});t.initialized=!0}},o=function(){t=[];var u=$("["+i+"]"),n=$("["+r+"]");u.each(function(){for(var e=[],u,o,h,s,f=0;f<n.length;f++)u=n[f],u.controllerNames||(u.controllerNames=[]),o=$(u).attr(r),h=ut(o),$(u).attr(r,h),s=$(this).attr(i),o.indexOf(s)!=-1&&(e[e.length]=u,u.controllerNames[u.controllerNames.length]=s);t[t.length]={controller:this,controlledElements:e,init:!1}})},e=function(){for(var f=(new Date).getTime(),r,u,i=0;i<t.length;i++){if((new Date).getTime()-f>2500){setTimeout(function(){n.subscribe()},0);return}(r=t[i],r.init)||(u=r.controller,v(u),a(u,function(){if(this.delta){var n=k(this);d(this.delta,n)}}),r.init=!0)}},k=function(n){for(var f=null,o=$(n).attr(i),u,e,r=0;r<t.length;r++)if(u=t[r],e=$(u.controller).attr(i),e==o){f=u.controlledElements;break}return f},d=function(t,i){var f,e;if(i&&i!=null)for(f=0;f<i.length;f++){var r=i[f],o=$(r).attr("price"),u=n.parseFloatNumber(o);u=u+t;$(r).attr("price",u);e=n.formatNumber(u);$(r).prop("tagName").toLowerCase()=="input"&&$(r).prop("type")=="hidden"?($(r).val(u),$(r).trigger("change")):$(r).html(e);s(r)}},s=function(n){var t=$(n).attr(c);t&&typeof this[t]=="function"&&this[t](n)},g=function(){for(var r,i,u,n=0;n<t.length;n++)for(r=t[n].controlledElements,i=0;i<r.length;i++)u=r[i],s(u)},nt=function(){for(var i=$("["+r+"]"),t,n=0;n<i.length;n++)(t=i[n],rt(t))||it(t)},tt=function(){for(var i,r,n=0;n<t.length;n++)i=t[n],r=i.controller,r.initialized=!1},it=function(t){var o=$(t).attr(r),i,c,f,e;if(o){var l=$(t).attr("price"),a=n.parseFloatNumber(l),s=h(o),u=0;for(i=0;i<s.length;i++)(c=s[i],f=ft(c),f)&&(u=u+f.totalDelta);e=a+u;$(t).attr("price",e);$(t).html(n.formatNumber(e))}},rt=function(n){return n.controllerNames},h=function(n){if(!n)return[];return n.match(l)},ut=function(n){var t=h(n);return t.toString()},ft=function(n){for(var u,f,r=0;r<t.length;r++)if(u=t[r],f=$(u.controller).attr(i),n==f)return u.controller;return null};return n.init=function(){o();e()},n.refresh=function(){nt();tt();o();e();g();typeof window[f]=="function"&&window[f]()},n.subscribe=function(){e()},n.parseFloatNumber=function(n){return parseFloat(n)},n.setOnRefreshCallback=function(n){f=n},n.formatNumber=function(n){return String&&typeof String.format!="function"?n.toString():String.format("{0:#,##0.##}",n)},n},$(document).ready(function(){this.priceCalculator=new PriceCalculator;this.priceCalculator.init();typeof window.formatCurrency=="function"&&(this.priceCalculator.formatNumber=window.formatCurrency);typeof window.createFloat=="function"&&(this.priceCalculator.parseFloatNumber=window.createFloat);$(document).ajaxComplete(this.priceCalculator.refresh)}));Array.prototype.find||(Array.prototype.find=function(n,t){for(var r,u,i=0;i<this.length;i++)if(r=this[i],u=r[n.toString()],u&&u==t)return r;return null});Array.prototype.findAll||(Array.prototype.findAll=function(n,t){for(var r=[],u,f,i=0;i<this.length;i++)u=this[i],f=u[n.toString()],f&&f==t&&(r[r.length]=u);return r});window.site={},function(n,t){"use strict";n(function(){var r,o,s,u,f,a,i,l,b;t.viewportWidth=function(){return window.Modernizr.touch?function(){return n(window).width()}:navigator.userAgent.match(/safari/i)&&!navigator.userAgent.match(/chrome/i)?function(){return document.documentElement.clientWidth}:function(){return window.innerWidth||document.documentElement.clientWidth}}();t.isDesktop=function(){return function(){return t.viewportWidth()<992?!1:!0}}();n("[data-custom-tab]").click(function(){n(this).tab("show")});t.isNewChoice=!1;r=n("html, body");o=n("header .logo").outerHeight();n("[data-scroll-to-id]").on("click","a",function(t){t.preventDefault();var u=n(this),i=n(u.attr("href"));i.length&&(u.data("open-tab")&&i.click(),r.stop().animate({scrollTop:i.offset().top-o},500))});n("[data-scroll-to-top]").on("click",function(){r.stop().animate({scrollTop:0},500)});n('.nav-tabs a[data-toggle="tab"]').on("click",function(t){if(n(this).hasClass("disabled-tab"))return t.preventDefault(),!1});if(s=n("#city_pairs_data"),t.json=s.length?JSON.parse(s.html()):[],u=n("[data-switch-active]"),u.length)u.on("click.switchActive","[data-switch-item]",function(){var t=n(this);t.hasClass("active")||(u.find("[data-switch-item].active").removeClass("active"),t.addClass("active"))});f=n(".item-bar").outerHeight(!0);n(".top-bar-inner").css("padding-bottom",f).css("visibility","visible");n(window).on("resize",function(){f=n(".item-bar").outerHeight(!0);n(".top-bar-inner").css("padding-bottom",f)});n(window).on("load",function(){var t=n("[data-auto-popin]").first();t.length&&t.click()});n("[data-select-all-handle]").on("change","[data-select-all-input]",function(){var t=n(this).prop("checked");n(this).closest("[data-select-all-handle]").find('input[type="checkbox"]').prop("checked",t)});n(".add-credit-btn").on("click",function(){n(".credit-form").hide();n(".add-credit-form").show().addClass("active-toggle")});n(".cancel-credit-btn").on("click",function(){n(".credit-form").show();n(".add-credit-form").hide().removeClass("active-toggle")});n(".edit-credit-btn").on("click",function(){n(".credit-form").addClass("open-toggle")});n(".cancel-edit-btn").on("click",function(){n(".credit-form").removeClass("open-toggle")});a=n("[data-toggle-bar-chart]");a.on("click",function(){var t=n(this).parent(),i=t.parents("section");t.siblings("li").removeClass("bar-active");t.toggleClass("bar-active");t.hasClass("bar-active")?i.data("isSelected",!0):i.data("isSelected",!1)});n("[data-toggle-btn] .btn").on("click",function(t){t.preventDefault();var i=n(this),f=i.data("val"),r=i.closest("[data-toggle-btn]"),u=r.find(".active"),e=i.parent();e.attr("data-disabled")!=="true"&&(r.attr("data-toggle-off")?i.hasClass("active")?i.removeClass("active"):(r.attr("data-toggle-multi")||u.length>0&&r.find(".btn").removeClass("active"),i.addClass("active")):(u.length>0&&r.find(".btn").removeClass("active"),i.addClass("active")),r.attr("data-link-toggle")&&r.find("[data-toggle-linked-ele]").val(f))});n("[data-iata-number]").keydown(function(t){var i=n(this).val().length;if(n.inArray(t.keyCode,[8,9,27,13,110])===-1&&(t.keyCode!==65||t.ctrlKey!==!0&&t.metaKey!==!0)&&(!(t.keyCode>=35)||!(t.keyCode<=40)))return(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),i>=10?!1:void 0});var e=n("[data-voucher-number]"),v=n("[data-voucher-amount]"),y=n("[data-voucher-retrieve]"),h=n("[data-voucher-apply]"),c=n("[data-voucher-error-message]"),p=n("[data-voucher-content]"),nt=n("[data-voucher-reuse]"),w=n("[data-voucher-success]");y.on("click",function(){c.addClass("hidden");e.removeClass("input-error");e.val().length?(n(this).addClass("hidden"),h.removeClass("hidden"),v.removeClass("hidden")):(c.removeClass("hidden"),e.addClass("input-error"),r.stop().animate({scrollTop:c.offset().top-o},500))});h.on("click",function(){p.addClass("hidden");w.removeClass("hidden")});nt.on("click",function(){p.removeClass("hidden");y.removeClass("hidden");w.addClass("hidden");h.addClass("hidden");v.addClass("hidden");e.val("").focus()});t.lang=function(){var t=n("body").attr("lang")||n("html").attr("lang");return typeof t!="undefined"?t:"en"}();n("[data-remove-active]").on("click",function(){var t=n(this).attr("data-remove-active");return n(t).find(".btn").removeClass("active").filter("[data-add-for-all]").data("is-force",!1),!1});n("[data-reset-btn]").on("click",function(){var t=n(this).parents("[data-reset-select]").find("select");t.find("option:first").prop("selected",!0);t.change();n(this).parents("[data-toggle-btn]").find("[data-toggle-active] .circle-btn").removeClass("active");n(this).parents("[data-toggle-btn]").find("[data-toggle-active] .circle-btn:first").addClass("active")});if(t.openWindow=function(n,t,r,u){var f=window.screenLeft!=undefined?window.screenLeft:screen.left,e=window.screenTop!=undefined?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,h=o/2-r/2+f,c=s/2-u/2+e,l=window.open(i.attr("href"),i.attr("title"),"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+r+", height="+u+", top="+c+", left="+h);window.focus&&l.focus()},i=n("[data-gb-login]"),i.length)i.on("click",function(n){n.preventDefault();t.viewportWidth()>768?t.openWindow(i.attr("href"),i.attr("title"),screen.width/2,screen.height/2):t.openWindow(i.attr("href"),i.attr("title"),screen.width,screen.height)});n("[data-show-transition]").on("click",function(t){t.preventDefault();var i=n(this).data("show-transition"),r=n(this).attr("href");i.length>0&&(n.magnificPopup.close(),n(i).removeClass("hidden"),setTimeout(function(){window.location.href=r},1500))});n("[data-go-back]").on("click.goBack",function(n){n.preventDefault();window.history.back()});l=n(".mfp-wrap.mfp-ready");b=n(".overlayer");l.on("click",".mfp-layer, .btn-close, .btn",function(){var t=n(this);l.hide();b.hide();t.trigger("hiddenCallback")});n("[data-reset-btn]").on("click",function(t){t.preventDefault();n(this).parents("[data-allow-reset]").find("[data-reset-ele]").val("")});var k=function(n){return n.find("option:selected").index()},d=function(n,t,i){for(var u="<option value>"+n+"<\/option>",f,r=1;r<=t;r++)f=r===i?"selected":"",u+='<option value="'+r+'"'+f+">"+r+"<\/option>";return u},g=function(n,t,i,r,u){var f=new Date(i.val()||u,t.val()||r,0);t.html(d("MM",12,k(t)));n.html(d("DD",f.getDate(),k(n)))};t.updateSelect=function(n,t,i){var f=n.find("[data-date]"),r=n.find("[data-month]"),u=n.find("[data-year]");u.on("change.updateSelect",function(){g(f,r,u,t,i)});r.on("change.updateSelect",function(){g(f,r,u,t,i)})}})}(window.jQuery,window.site),function(n){"use strict";function e(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="about-you",i=n("body"),r=function(n){return n.find("option:selected").index()},u=function(n,t,i){for(var u="<option value>"+n+"<\/option>",f,r=1;r<=t;r++)f=r===i?"selected":"",u+='<option value="'+r+'"'+f+">"+r+"<\/option>";return u},f=function(n,t,i,f,e){var o=new Date(i.val()||e,t.val()||f,0);t.html(u("MM",12,r(t)));n.html(u("DD",o.getDate(),r(n)))},o=function(n,i,r){var o=n.find("[data-date]"),u=n.find("[data-month]"),e=n.find("[data-year]");e.on("change."+t,function(){f(o,u,e,i,r)});u.on("change."+t,function(){f(o,u,e,i,r)})},s=function(n,t){n[t].show();n.overlayer.show()},h=function(n,t){n[t].hide();n.overlayer.hide()};e.prototype={init:function(){var r=this,u=r.element,f=r.element.find("[data-first-name]"),e,o=u.find("[data-check-term]"),h=u.find("[data-option-no]"),c=u.find("[data-disagree-link]"),s=u.find("[data-continue-btn]"),l=u.find("[data-addon-box]"),a=r.element.find("form[data-is-about-you]"),v=u.find("[data-agree-link]");r.insurePopup=n("#popup__insurance");r.jpInsurance=n("#popup__about__jp__insurance");r.overlayer=n(".overlayer");r.jpInsurance.on("hiddenCallback",function(){i.removeClass("opening")});r.element.find("[data-type]").each(function(t){if(t){var i=n(this);r.selectDate(i)}});f.one("focus",function(){e=r.element.find("[data-tab-ele]:last").children()});f.blur(function(){var f=n(this),t=f.val().trim(),i=f.parents("[data-meal-tab]"),o=i.index(),s=e.eq(o),r=s.find("[data-auto-fill-name]"),u;t.length&&/^[a-zA-Z]+([- '][a-zA-Z]+)*$/.test(t)?(r.html(t),i.find("[data-auto-fill-name]").html(t)):(u=r.data("auto-fill-name"),r.html(u),i.find("[data-auto-fill-name]").html(u))});s.on("click."+t,function(){o.data("agreeTerm",!0)})},activePopup:function(n){var t=this;s(t,n);n==="jpInsurance"&&i.addClass("opening")},selectDate:function(n){var t=new Date,i=t.getMonth()+1,r=t.getFullYear();o(n,i,r)},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(i,r){return this.each(function(){var u=n.data(this,t);u?u[i]&&u[i](r):n.data(this,t,new e(this,i))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function h(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="accordion",u="acc-active",f=t.site,r=n(t),o=n("html"),e=function(){var n=this,t=n.options;n.element.find(".active").removeClass("active");t.activeFirst||n.element.find("[data-heading]").removeClass(u).parent().removeClass("active");f.isDesktop()&&n.options.showOnDesktop?n.element.find("[data-content]").show():n.options.reset&&n.element.find("[data-content]").css("display","")},s=function(n){n.parent().toggleClass("active")};h.prototype={init:function(){var t=this,c=!1,h=t.options,l;t.lastWidth=r.width();t.element.on("click."+i,"[data-heading]",function(t){var e,a,l;t.preventDefault();(!f.isDesktop()||o.hasClass("touch")&&r.width()<1024||h.desktop)&&(e=n(this),a=e.parent().find("[data-content]"),c||(c=!0,l=e.parents("[data-"+i+"]").find("."+u),l.length&&!l.is(e)&&(l.toggleClass(u),l.parent().find("[data-content]").toggle(),h.addClassForParent===!0&&s(l)),a.toggle(),e.toggleClass(u),h.addClassForParent===!0&&s(e),c=!1))});if(h.clickOutClose===!0)r.on("click.outClose",function(r){n(r.target).parents("[data-"+i+"]").length||e.call(t)});r.ready(function(){o.hasClass("touch")&&r.width()<1024||!h.showOnDesktop?(t.element.find("[data-content]").hide(),h.activeFirst&&(t.element.find("[data-content]").eq(0).show(),t.element.find("[data-heading]").eq(0).addClass("acc-active"))):t.element.find("[data-content]").css("display","");f.isDesktop()&&!h.showOnDesktop&&e.call(t)});r.on("resize."+i,function(){(f.isDesktop()||r.width()!==t.lastWidth)&&(h.clickOutClose===!0?e.call(t):(clearTimeout(l),l=setTimeout(function(){e.call(t)},250)),t.lastWidth=r.width())})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new h(this,t))})};n.fn[i].defaults={showOnDesktop:!0,addClassForParent:!1,clickOutClose:!0,desktop:!1,reset:!0};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function r(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="avatar-upload",i=function(t,i){var r=t.holder.find(".profile-upload-img"),u=new FileReader,f=n("<div>",{"class":"profile-upload-overlay"});i.files&&i.files[0]?(u.onload=function(n){r.css("background","url("+n.target.result+") center center/cover no-repeat");r.addClass("c-avatar-loaded");r.html(f)},u.readAsDataURL(i.files[0])):(u.onload=function(n){r.css("background","url("+n.target.result+") center center/cover no-repeat");r.addClass("c-avatar-loaded");r.html(f)},u.readAsDataURL(i))};r.prototype={init:function(){var r=this;r.btnBrowse=r.element.find("#browse-input");r.btnAdd=r.element.find(".add-photo-btn");r.btnBrowse.on("change."+t,function(){i(r,this)});r.holder=r.element.find(".profile-upload");r.holder.on("dragover."+t,function(){return n(this).addClass("dragover"),!1});r.holder.on("dragend."+t,function(){return n(this).removeClass("dragover"),!1});r.holder.on("drop."+t,function(t){return t.preventDefault(),n(this).removeClass("dragover"),i(r,t.originalEvent.dataTransfer.files[0]),!1});r.imgHolder=r.holder.find(".profile-upload-img");r.btnAdd.on("click."+t,function(){r.imgHolder.attr("style","");r.btnBrowse.val("");r.imgHolder.removeClass("c-avatar-loaded")});r.existAvatar=r.element.find(".profile__avatar");r.existAvatar.on("click."+t,function(){var t=n(this).find("img").attr("src");r.imgHolder.css("background","url("+t+") center center/cover no-repeat");r.imgHolder.hasClass("c-avatar-loaded")||r.imgHolder.addClass("c-avatar-loaded")})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(i,u){return this.each(function(){var f=n.data(this,t);f?f[i]&&f[i](u):n.data(this,t,new r(this,i))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="booking-scoot",r=function(){var t=this;t.total=847.8;t.passengers=t.options.passengers;n.each(t.passengers,function(t,i){var r=n('[data-passenger="'+t+'"]');r.each(function(){var r=n(this),u=r.parents("[data-service]"),t;u.length&&(t=u.data("service"),i.hasOwnProperty(t)&&i[t].last&&r.addClass("active"))})})},u=function(t){var i=this;n.ajax({url:t,dataType:"json"}).done(function(n){n.isSuccess&&(i.totalEle.html(" "+n.total),i.total=n.total)}).fail(function(){})};i.prototype={init:function(){var i=this,f=!1;i.servicesList=[];i.totalEle=n(".booking-total-price__price span");i.total;i.passengers;r.call(i);i.element.on("click."+t,"[data-add-for-all]",function(){var t=n(this),f=t.parents("[data-service]"),r=f.find(t.data("add-for-all")+" [data-passenger]"),u=!t.data("is-force");t.data("is-force",u);r.each(function(){n(this).addClass("active")});u?r.addClass("active"):(r.removeClass("active"),i.servicesList.length=0)});i.element.on("click."+t,"[data-passenger]",function(){var u=n(this),o=u.parents("[data-service]"),t,r,e,s;o.length&&(t=o.data("service"),r=u.data("passenger"),typeof i.passengers[r]!="undefined"&&(typeof i.passengers[r][t]!="undefined"?(e=i.passengers[r][t],s=e.curr,e.curr=!s,n.inArray(t,i.servicesList)===-1&&i.servicesList.push(t),f=!0):(i.passengers[r][t]={curr:1,last:0},i.servicesList.push(t),f=!0)),u.closest("[data-toggle-element]").prev().find("[data-add-for-all]").removeClass("active").data("is-force",!1))});i.element.on("click."+t,"[data-bc-save]",function(){var e=n(this),r,t;if(f){for(r=i.servicesList.length,t=0;t<r;t++)u.call(i,"data/data-new.json",i.servicesList[t]);f=!1;i.servicesList.length=0}e.parents("[data-service]").find("[data-pc-close-icon]").click()})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={passengers:{}};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="copy-meals";i.prototype={init:function(){var i=this,r=i.element.find("[data-copy-meals-btn]"),u=i.element.find("[data-meals-item]"),f=u.find("input[type=radio]"),e=i.element.find("[data-copy-meals-btn]");f.on("click."+t,function(){var t=n(this),f=t.attr("name"),i=e.filter("[data-radio-link='"+f+"']"),r,u;t.hasClass("checked")?(i.removeClass("active"),i.removeClass("has-meal"),t.trigger("unselect.meal"),t.prop("checked",!1),t.closest("[data-meals-parent]").find("input[type=radio]").not(":checked").removeClass("checked")):(i.removeClass("active"),i.addClass("has-meal"),r=t.closest("[data-meals-parent]"),u=r.find("input[type=radio].checked"),u.trigger("unselect.meal"),t.closest("[data-meals-parent]").find("input[type=radio]").not(":checked").removeClass("checked"),t.trigger("select.meal"),t.addClass("checked"))});r.on("click."+t,function(){var t=n(this);if(!t.hasClass("active")&&t.closest("[data-meals-parent]").find("input[type=radio]:checked").length){t.addClass("active");t.removeClass("has-meal");var i=t.closest(".tab-pane"),u=i.index(),f=i.find("[data-meal-id]:checked"),r=[],e=i.closest("[data-meal-tab]");f.each(function(){r.push(n(this).data("meal-id"))});e.siblings().each(function(){var t=n(this);t.find("[data-meals-parent]").eq(u).find("[data-meal-id]").filter(function(){var t=n(this);n.inArray(t.data("meal-id"),r)!==-1?(t.prop("checked",!0),t.addClass("checked"),t.trigger("select.meal")):t.is(":checked")&&(t.prop("checked",!1),t.removeClass("checked"),t.trigger("unselect.meal"))})})}})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t,i){"use strict";function e(t,i){this.element=n(t);this.options=n.extend({},n.fn[r].defaults,this.element.data(),i);this.init()}var r="date-picker",u=t.site,f=n(t),o=n("body, html"),s=function(){var t=this,i=t.options;switch(u.lang){case"jp":n.datepicker.setDefaults(n.datepicker.regional.ja);break;case"tw":n.datepicker.setDefaults(n.datepicker.regional["zh-TW"]);break;case"cn":n.datepicker.setDefaults(n.datepicker.regional["zh-CN"]);break;case"kr":n.datepicker.setDefaults(n.datepicker.regional.ko);break;case"th":i.isBE=!0;n.datepicker.setDefaults(n.datepicker.regional.th);break;default:n.datepicker.regional[""].dateFormat="d M yy";n.datepicker.setDefaults(n.datepicker.regional[""])}};e.prototype={init:function(){var t=this,e=t.options;t.mainConEle=n(".main-container");t.isNew=!1;t.selectedRange=[];t.blockedDates=[];t.marketFrom="";t.marketTo="";s.call(t);e.beforeShowDay=function(i){var o,f,s,r,u;return typeof e.depart!="undefined"&&(o=n(this),f=o.datepicker("getDate"),s=t.element.parents("form").find(e.linked),r=s.datepicker("getDate"),!t.checkIfBlocked(i))?(u="avoid-clicks",n(this).parents("form").hasClass("form-booking__oneway")==!1&&n(this).parents("form").hasClass("form-booking__multi")==!1&&(f&&r&&i.getTime()==f.getTime()||r&&i>=f&&i<=r)&&(u=u+" dp-highlight"),[!0,u]):typeof e.return!="undefined"&&(o=t.element.parents("form").find(e.linked),f=o.datepicker("getDate"),s=n(this),r=s.datepicker("getDate"),!t.checkIfBlocked(i))?(u="avoid-clicks",n(this).parents("form").hasClass("form-booking__oneway")==!1&&n(this).parents("form").hasClass("form-booking__multi")==!1&&(f&&r&&i.getTime()==f.getTime()||r&&i>=f&&i<=r)&&(u=u+" dp-highlight"),[!0,u]):(u="",f!==null&&r!==null&&r.length&&((i.getTime()===f.getTime()||i.getTime()===r.getTime())&&(u="ui-datepicker-current-day"),(f&&r&&i.getTime()==f.getTime()||r&&i>=f&&i<=r)&&(u=u+" dp-highlight")),n(this).parents("form").hasClass("form-booking__return")==!0&&(f&&r&&i.getTime()==f.getTime()||r&&i>=f&&i<=r)&&(u=u+" dp-highlight"),[!0,u])};e.beforeShow=function(){var y=Math.abs(t.element.offset().top-f.scrollTop()-f.outerHeight()),c,l,r,a,v,i,h,p;if(y<e.minHeightDatePicker&&o.scrollTop(f.scrollTop()+e.minHeightDatePicker-y),n(this).parents("form").hasClass("form-booking__multi")?(c=n(this).parents("form").find("[data-from-input-hidden]").attr("value"),l=n(this).parents("form").find("[data-to-input-hidden]").attr("value")):n(this).parents(".field__return")!=null&&n(this).parents(".field__return").length>0?(l=n(this).parents("form").find("[data-from-input-hidden]").attr("value"),c=n(this).parents("form").find("[data-to-input-hidden]").attr("value")):(c=n(this).parents("form").find("[data-from-input-hidden]").attr("value"),l=n(this).parents("form").find("[data-to-input-hidden]").attr("value")),e.onewayAjax&&(c=e.ajaxfrom,l=e.ajaxto),t.populateBlockedDates(c,l),typeof e.return!="undefined"){r=e.onewayAjax?n(".form-booking__oneway").find("[data-depart]"):t.element.parents("form").find(e.linked);var s=r.datepicker("getDate"),i=n(this),h=i.datepicker("getDate");if(i.datepicker("option","maxDate",null),s===null)return i.datepicker("option","minDate",new Date),r.focus(),!1;if(n(this).parents("form").hasClass("form-booking__return")&&(t.uiDatepickerDiv.data("start-date",n.datepicker.formatDate("dd M yy",s)),t.uiDatepickerDiv.data("dp-mode","return")),i.datepicker("option","minDate",s),e.setReturnDate)if(h!=="undefined"&&h<=s)n("[data-to-input-hidden]").attr("value")=="HNL"&&(a=new Date(r.datepicker("getDate").getFullYear(),r.datepicker("getDate").getMonth(),r.datepicker("getDate").getDate()+90),i.datepicker("option","maxDate",a)),i.datepicker("setDate",s),v=i.siblings('input[type="hidden"]'),v.val(n.datepicker.formatDate("mm/dd/yy",s));else if(h!=="undefined"&&n("[data-to-input-hidden]").attr("value")=="HNL"){a=new Date(r.datepicker("getDate").getFullYear(),r.datepicker("getDate").getMonth(),r.datepicker("getDate").getDate()+90);i.datepicker("option","maxDate",a);var w=r.datepicker("getDate"),b=i.datepicker("getDate");b-w>7776e6&&(i.datepicker("setDate",s),v=i.siblings('input[type="hidden"]'),v.val(n.datepicker.formatDate("mm/dd/yy",s)))}}typeof e.depart!="undefined"&&n(this).parents("form").hasClass("form-booking__return")&&(t.uiDatepickerDiv.data("dp-mode","depart"),i=t.element.parents("form").find(e.linked),h=i.datepicker("getDate"),h!=null?t.uiDatepickerDiv.data("end-date",n.datepicker.formatDate("dd M yy",h)):t.uiDatepickerDiv.data("end-date",null));typeof e.rightCorner!="undefined"&&(e.rightCorner==="desktop"&&u.isDesktop()?t.uiDatepickerDiv.addClass("right-corner"):e.rightCorner!=="mobile"||u.isDesktop()?t.uiDatepickerDiv.removeClass("right-corner"):t.uiDatepickerDiv.addClass("right-corner"));typeof e.onSecondNav!="undefined"&&t.uiDatepickerDiv.addClass("right-corner-nav");typeof e.fullWidthMobile!="undefined"&&e.fullWidthMobile&&(u.isDesktop()||(clearTimeout(p),p=setTimeout(function(){t.uiDatepickerDiv.css("width",t.mainConEle.width())},10)));n(this).parents("form").hasClass("form-booking__return")==!1&&(t.uiDatepickerDiv.data("start-date",null),t.uiDatepickerDiv.data("end-date",null),t.uiDatepickerDiv.data("dp-mode",null))};t.populateBlockedDates=function(i,r){var u=n("[data-schedules-ajax-url]").attr("data-schedules-ajax-url");(t.blockedDates==""||t.marketFrom!=i||t.marketTo!=r)&&i!=""&&r!=""&&(t.marketFrom=i,t.marketTo=r,u=u+"?deptStation="+i+"&arrStation="+r,n.ajax({url:u,data:null,type:"GET",dataType:"json",async:!1,success:function(n){t.blockedDates=n},error:function(){t.blockedDates="no data"}}))};t.checkIfBlocked=function(n){for(var i=0,r=t.blockedDates.length;i<r;i++)if(t.blockedDates[i]==n.format("MM dd yyyy"))return!1;return!0};e.onSelect=function(){var i=t.element.siblings('input[type="hidden"]');i.val(n.datepicker.formatDate("mm/dd/yy",t.element.datepicker("getDate")));typeof e.depart!="undefined"&&(t.isNew=!0);typeof e.return!="undefined"&&u.isNewChoice&&t.element.parents("form").find("[data-traveler-count] [data-title]").click()};e.onClose=function(){if(typeof e.depart!="undefined"&&typeof e.linked!="undefined"){var i=t.element.parents("form").find(e.linked);t.isNew&&typeof i.data("no-focus")=="undefined"&&(i.focus(),t.isNew=!1)}typeof e.depart!="undefined"&&t.uiDatepickerDiv.data("start-date",n.datepicker.formatDate("dd M yy",t.element.datepicker("getDate")));typeof e.return!="undefined"&&t.uiDatepickerDiv.data("end-date",n.datepicker.formatDate("dd M yy",t.element.datepicker("getDate")));typeof e.rightCorner!="undefined"&&(e.rightCorner==="desktop"&&u.isDesktop()&&t.uiDatepickerDiv.addClass("right-corner"),e.rightCorner!=="mobile"||u.isDesktop()||t.uiDatepickerDiv.addClass("right-corner"));typeof e.onSecondNav!="undefined"&&t.uiDatepickerDiv.removeClass("right-corner-nav")};e.allowPrevDate&&(e.minDate=null);e.allowPrevDate&&(e.minDate=null);t.element.datepicker(e);t.uiDatepickerDiv=n("#ui-datepicker-div");t.uiDatepickerDiv.on("mouseover",".ui-datepicker-calendar td",function(){var e=n(this).parents(".ui-datepicker"),r=e.data("dp-mode"),o=e.data("start-date"),s=e.data("end-date"),t,u,f;(r!=null||o!=null||s!=null)&&n(this).data("year")!=i&&(r!="depart"||s!=null)&&(r!="return"||o!=null)&&(t=n(this).data("year")+"-"+(n(this).data("month")+1)+"-"+n("a",this).html(),t=n.datepicker.parseDate("yy-mm-dd",t).getTime(),r=="depart"?(u=t,f=n.datepicker.parseDate("dd M yy",s).getTime()):(u=n.datepicker.parseDate("dd M yy",o).getTime(),f=t),n("#ui-datepicker-div td").each(function(){if(n(this).data("year")!=i){var t=n(this).data("year")+"-"+(n(this).data("month")+1)+"-"+n("a",this).html();t=n.datepicker.parseDate("yy-mm-dd",t).getTime();t>=u&&t<=f?n(this).addClass("dp-highlight"):n(this).removeClass("dp-highlight")}}))});f.on("resize."+r+" load."+r,function(){e.numberOfMonthsMobile&&(u.isDesktop()?t.element.datepicker("option","numberOfMonths",e.numberOfMonths):t.element.datepicker("option","numberOfMonths",e.numberOfMonthsMobile))});t.element.datepicker("setDate",n.datepicker.parseDate("dd mm yy",t.element.context.defaultValue))},destroy:function(){n.removeData(this.element[0],r)}};n.fn[r]=function(t,i){return this.each(function(){var u=n.data(this,r);u?u[t]&&u[t](i):n.data(this,r,new e(this,t))})};n.fn[r].defaults={minDate:new Date,duration:"",showAnim:"",minHeightDatePicker:302,setReturnDate:!0};n(function(){n("[data-"+r+"]")[r]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="edit-passenger";i.prototype={init:function(){var i=this,r=i.element;i.popup=r.find("[data-passenger-popup]");i.editBtn=r.find("[data-edit-passenger]");i.cancelBtn=r.find("[data-cancel-edit]");i.proceedBtn=r.find("[data-proceed-btn]");i.activeBtn;i.openPopup=!1;i.editBtn.on("click."+t,function(){if(i.openPopup===!1){i.activeBtn=n(this);i.popup.magnificPopup("open");i.openPopup=!0;return}i.openPopup=!1});i.proceedBtn.on("click."+t,function(){n.magnificPopup.close();i.openPopup=!0;i.activeBtn.data("manual-click",!1).click()});i.cancelBtn.on("click."+t,function(){i.activeBtn.data("manual-click",!0)})},reset:function(){var n=this;n.activeBtn.data("manual-click")&&(n.openPopup=!1)},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function u(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="fixed-scroll",f=t.site,r=n(t);u.prototype={init:function(){var t=this,u=t.options;t.lastWidth=r.width();t.logoHeight=n("header .logo").outerHeight();t.endElement=n("[data-end-element]");t.flagEle=t.element.parent();t.flagPos=t.flagEle.offset().top;t.isMoved=!1;t.endPos=t.endElement.length?t.endElement.offset().top:n("body").height();r.scrollTop()>t.element.offset().top?t.element.css({position:"fixed",top:t.logoHeight}):t.element.attr("style","");r.on("scroll."+i,function(){r.scrollTop()+t.logoHeight+t.element.outerHeight()>t.endPos?(t.element.css({position:"absolute",top:t.endPos-t.element.outerHeight()-t.flagPos}),t.isMoved=!0):r.scrollTop()+t.logoHeight>t.flagPos?(t.element.css({position:"fixed",top:t.logoHeight}),t.isMoved=!0):(t.element.attr("style",""),t.isMoved=!1);t.isMoved&&u.isSetWidth&&t.element.width(t.flagEle.width())});r.ready(function(){r.trigger("resize."+i)});r.on("resize."+i,function(){(f.isDesktop()||r.width()!==t.lastWidth)&&(t.endElement.length&&(t.endPos=t.endElement.offset().top),t.flagPos=t.element.parent().offset().top,t.logoHeight=n("header .logo").outerHeight(),t.lastWidth=r.width())})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var f=n.data(this,i);f?f[t]&&f[t](r):n.data(this,i,new u(this,t))})};n.fn[i].defaults={isSetWidth:!1};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t,i){"use strict";function f(t,i){this.element=n(t);this.options=n.extend({},n.fn[r].defaults,this.element.data(),i);this.init()}var r="fly-option",u=n(t);f.prototype={init:function(){var t=this;t.bodyEle=n("body");t.scrollEle=n("html, body");t.lastWidth=u.width();t.header=n("header .logo");t.element.data("ischecked",!1);t.checkedEle;t.element.on("click."+r,"[data-fly-type]",function(){var r=n(this),f=r.parents(".flight-results__result"),u=f.find(r.data("option-target")),s=f.find("button.open").not(r),e,o,h;if(t.element.find(".choosen").not(r).removeClass("active choosen open"),f.find("[data-box-option]").slideUp("fast",function(){}),s.hasClass("choosen")?s.removeClass("open"):s.removeClass("open active"),f.siblings().each(function(){var i=n(this);i.find("[data-box-option]").slideUp(function(){t.bodyEle.css("overflow-x","")});i.find("button.active").not(".choosen").removeClass("active open")}),r.hasClass("choosen")?r.addClass("active"):r.toggleClass("active"),r.toggleClass("open"),r.hasClass("open")){if(u.fadeIn(),t.bodyEle.css("overflow-x","hidden"),t.options.preSelect&&t.options.preSelect.toLowerCase()!="true")return;switch(r.data("fly-type")){case"scootbiz":e=u.find("input[type=radio]:last");e.prop("checked",!0);u.find(".upgrade__type").not(":last").addClass("upgrade__type--disable");t.checkedEle=i;break;case"fly":o=f.find(".flight__scootbiz button.active");e=u.find('[data-fare="flybag"] input[type=radio]').length>0?u.find('[data-fare="flybag"] input[type=radio]').eq(0):u.find("input[type=radio]").eq(0);typeof t.checkedEle!="undefined"&&u.find(t.checkedEle).length?(t.checkedEle.prop("checked",!0),e=t.checkedEle):e.prop("checked",!0);o.length&&r.hasClass("choosen")&&(f.find(o.data("option-target")).hide(),o.removeClass("active open"));u.find("input[type=radio]").length>1&&(h=u.find("input[type=radio]:last"),h.val()!==e.val()&&h.prop("checked",!1));t.checkedEle=i}ScootBook.Changed&&ScootBook.BookingSummaryAjax&&(ScootBook.Changed(),ScootBook.BookingSummaryAjax())}else u.slideUp("fast",function(){t.bodyEle.css("overflow-x","")});t.element.data("ischecked",!0)});t.element.on("click."+r,"[data-icon-close]",function(){var t=n(this),i=t.parents(".flight-results__result");i.find("button.open").click()});t.element.on("click."+r,"input[type=radio]",function(){var r=n(this),i=r.parents(".flight-results__result"),f,u,e;t.element.find(".choosen").removeClass("choosen active");r.closest("[data-flight-upgrade-scootbiz]").length?(i.find("[data-flight-upgrade-scootbiz] [data-icon-close]").click(),i.find(".flight__scootbiz button").addClass("choosen active")):(u=i.find(".flight__fly button"),e=i.find("[data-flight-upgrade-scootbiz] input[type=radio]:last"),typeof r.data("scootbiz-type")!="undefined"?(u.removeClass("choosen").addClass("active"),i.find(".flight__scootbiz button").addClass("choosen active"),e.prop("checked",!0),r=e,u.removeClass("active open")):(u.addClass("choosen active"),e.prop("checked",!1)),u.removeClass("open"),i.find("[data-flight-upgrade]").slideUp("fast"));t.element.data("ischecked",!0);t.checkedEle=r;setTimeout(function(){f=i.parents("section").next("section");f.length&&f.hasClass("booking-flight")&&t.scrollEle.stop().animate({scrollTop:f.offset().top-t.header.outerHeight()},300)},300)});u.on("keyup."+r,function(n){n.which===27&&t.resetAll()});t.preSelected=n("[checked]");t.preSelected.each(function(){this.click()})},resetAll:function(){var n=this;n.element.find("[data-box-option]").hide();n.element.find("button.active").removeClass("active")},destroy:function(){n.removeData(this.element[0],r)}};n.fn[r]=function(t,i){return this.each(function(){var u=n.data(this,r);u?u[t]&&u[t](i):n.data(this,r,new f(this,t))})};n.fn[r].defaults={};n(function(){n("[data-"+r+"]")[r]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="group-booking";i.prototype={init:function(){var i=this;i.gbContent=i.element.find("[data-gb-content]");i.gbEdit=i.element.find("[data-gb-edit]");i.gbNewAgent=i.element.find("[data-gb-new-agent]");i.gbActive=i.element.find("[data-gb-active]");i.goBackButton=i.element.find("[data-go-back]");i.element.on("click."+t,"[data-gb-btn-edit]",function(){i.gbContent.toggle();i.gbNewAgent.is(":visible")&&i.gbContent.toggle();i.gbNewAgent.hide();i.gbEdit.toggle();i.gbEdit.hasClass("edit-active")?i.gbEdit.removeClass("edit-active"):i.gbActive.toggleClass("gb-active")});i.element.on("click."+t,"[data-gb-btn-add-agent]",function(){i.gbActive.hasClass("gb-active")||i.gbActive.addClass("gb-active");i.gbEdit.addClass("edit-active");i.gbContent.hide();i.gbNewAgent.show();i.gbEdit.hide()});i.goBackButton.off("click").on("click."+t,function(){i.gbContent.show();i.gbNewAgent.hide();i.gbEdit.hide();i.gbActive.removeClass("gb-active");i.gbEdit.removeClass("edit-active")});i.element.on("click."+t,"[data-complete-profile]",function(t){t.preventDefault();var u=n(this),r=i.element.find(u.data("complete-profile"));r.length&&r.trigger("click")});i.element.on("click."+t,"[data-same-organization]",function(){var t=n(this);t.parents("form").find("[data-address-block]").slideToggle()})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function f(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="header-menu",e=n("html"),r=t.site,u=n(t);f.prototype={init:function(){var t=this,f=!1;t.header=n("header");t.menuIcon=t.element.find("[data-menu-icon]");t.menuWrapper=t.element.find("[data-menu-wrapper]");t.menu=t.element.find("[data-list-menu-item]");t.lastWidth=u.width();t.isReady=!1;t.menuIcon.off("click."+i).on("click."+i,function(){r.isDesktop()||(t.menuWrapper.toggle(),t.menuIcon.toggleClass("active"),t.menu.toggle(),t.header.toggleClass("open"))});t.element.on("click."+i,".navbar-main__right [data-menu-item]",function(){if(r.isDesktop()&&e.hasClass("touch")){var t=n(this);t.parent().toggleClass("active");f?(t.next().hide(),f=!1):(t.next().show(),f=!0)}});u.on("resize."+i+" load."+i,function(){(!t.isReady||u.width()!==t.lastWidth||r.isDesktop())&&(t.isReady=!0,r.isDesktop()?(t.menu.show(),t.menuWrapper.show(),t.menuIcon.removeClass("active"),t.header.removeClass("open")):(t.menuWrapper.hide(),t.menu.hide(),t.menuIcon.removeClass("active"),t.header.removeClass("open")),t.lastWidth=u.width())})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new f(this,t))})};n.fn[i].defaults={};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="load-more";i.prototype={init:function(){var i=this,r=i.options;i.btnLoadMore=i.element.find("[data-btn-load-more]");i.listItems=i.element.find("[data-load-item]");i.btnLoadMore.on("click."+t,function(){var t=0;i.listItems.filter(".hidden").each(function(){var i=n(this);return i.removeClass("hidden"),t++,t>=r.numToShow?!1:void 0});i.listItems.filter(".hidden").length||i.btnLoadMore.addClass("hidden")})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={numToShow:7};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function u(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="popover-info",f=t.site,r=n(t);u.prototype={init:function(){var i=this,t=i.options,u=n("body"),e=n("html, body");if(typeof t.popoverSeat!="undefined"&&(t.template=t.leftPanel?'<div class="popover popover-seat left-panel hidden-xs hidden-sm" role="tooltip"><div class="arrow"><\/div><div class="popover-title"><\/div><div class="popover-content"><\/div><\/div>':'<div class="popover popover-seat" role="tooltip"><div class="arrow"><\/div><div class="popover-title"><\/div><div class="popover-content"><\/div><\/div>',e.hasClass("touch")))return!1;typeof t.contentTarget!="undefined"&&(t.content=n(i.element.data("content-target")).html());typeof t.customTop!="undefined"&&(t.placement=function(t,i){var u=n(i).offset(),f=r.outerHeight(),e=r.scrollTop(),o=parseFloat(Math.abs((u.top-e)/f).toFixed(1));return o>.5?"top":"bottom"});t.trigger=="focus"&&i.element.tooltip({trigger:"hover",placement:"right",title:t.tooltipText});i.element.popover(t).on("show.bs.popover",function(){f.viewportWidth()<325&&u.addClass("opening-popover")}).on("shown.bs.popover",function(){var t=n(this),r=t.next();if(t.data("trigger")==="click")r.find(".popover__close").one("click",function(n){n.preventDefault();t.trigger("click")});if(t.hasClass("seat")){var u=t.data("seat-price"),f=t.data("seat-cat"),e=t.data("seat-currency");u=typeof u!="undefined"?e+u:"";typeof f=="undefined"&&(f="");i.element.data("recline")=="True"?r.find(".note.yellow-note").show():r.find(".note.yellow-note").hide();r.find(".pos").html("&nbsp"+t.find("span").html());r.find(".number").html(u);r.find(".text").html(f);t.hasClass("mine-seat selected")&&(r.find(".hidden-vs").removeClass("hidden-vs"),r.find(".username").html(t.attr("data-username")))}}).on("hide.bs.popover",function(){u.removeClass("opening-popover")})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var f=n.data(this,i);f?f[t]&&f[t](r):n.data(this,i,new u(this,t))})};n.fn[i].defaults={html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><a class="popover__close" href="javascript:void(0);"><span class="glyphicon glyphicon-remove"><\/span><\/a><div class="popover-title"><\/div><div class="popover-content"><\/div><\/div>'};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="popup-custom";i.prototype={init:function(){var i=this,r=i.options;i.target=n(r.target);i.closeIcon=i.target.find(r.closeIcon);i.overlayer=n(r.overlayer);i.fadeTime=r.fadeTime;i.bodyEle=n("body");i.element.on("click."+t,function(){i.initPopup()});i.closeIcon.on("click."+t,function(){i.resetPopupPreClose();i.resetPopup()});i.overlayer.on("click."+t,function(){i.resetPopupPreClose();i.resetPopup()})},initPopup:function(){var n=this,t;n.bodyEle.addClass("opening");n.overlayer.fadeIn(n.fadeTime);t=n.target.find(".ssr-container");t&&t.length&&t.trigger("pre-open",[n.element]);n.target.addClass(n.options.openClass)},resetPopup:function(){var n=this;n.bodyEle.removeClass("opening");n.overlayer.fadeOut(n.fadeTime);n.target.removeClass(n.options.openClass)},resetPopupPreClose:function(n){var t=this,i;(t.target.hasClass(t.options.openClass)||n)&&(i=t.target.find(".ssr-container"),i&&i.length&&i.trigger("pre-close",[t.element]))},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={target:".left-side__container",overlayer:".overlayer",closeIcon:"[data-pc-close-icon]",openClass:"open",fadeTime:400};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function f(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="popup-ui",r=t.site,u=t.l10n,e=n(t);f.prototype={init:function(){var h=this,t=h.options,s=n("body"),f,o;typeof t.src!="undefined"&&(t.items.src=t.src);typeof t.type!="undefined"&&(t.items.type=t.type);t.disableFrom&&(t.disableOn=function(){return r.viewportWidth()<t.disableFrom?!1:!0});f=n(t.items.src);o=n(".overlayer");t.callbacks={beforeOpen:function(){if(f.data("dynamicImage")){var i=n(h.element),t=i.data("imageUrl");t&&f.find("[data-meal-iframe]").attr("src",t)}},open:function(){var w;if(t.haveTerms){f.find("[data-view-terms]").on("click."+i,function(){f.find(".popup__front").hide().end().find(".popup__back").show()});f.find(".popup__back").on("click."+i,"[data-go-back]",function(){f.find(".popup__front").show().end().find(".popup__back").hide()})}if(t.haveFlight){f.find("[data-view-flight]").on("click."+i,function(){f.find(".popup__front").hide().end().find(".popup__flight-detail").show()});f.find(".popup__flight-detail").on("click."+i,"[data-go-back]",function(){f.find(".popup__front").show().end().find(".popup__flight-detail").hide()})}if(f.find("[data-scroll-tab]").attr("data-scroll-tab")&&e.trigger("resize.slick-slider"),t.grayOverlay&&s.addClass("gray-items"),s.addClass("opening"),f.parents(".mfp-wrap").attr("style","overflow-y: scroll;"),t.scrollingPopup&&f.parents(".mfp-content").addClass("scrolling-popup"),t.agentForgotPassword||t.indexLogin){var v=f.find(".error-mess"),l=f.find("[data-agent-id]"),c=f.find("[data-email-forgot]"),y=t.agentForgotPassword?!0:!1,a=u.getLabel(r.lang,"agentLogin"),b=f.find("[data-send-btn]"),h=n("#popup__success"),p=null;typeof u[r.lang]!="undefined"&&(y?a=u[r.lang].agentLogin:(a=u[r.lang].indexLogin,p=c.parents("form"),p.validation()));h.find(".mfp-close").off().on("click",function(){h.hide();o.hide()});h.find(".mfp-layer").off().on("click",function(){h.hide();o.hide()});n("body").on("keydown",function(n){if(n.keyCode===13)return b.trigger("click"),!1});w=function(t,i,r){var e={},o=t.attr("name")?t.attr("name"):"revForgotAgentPassword.Username",f,u;e[o]=t.val();f=i.find("h3");u=i.find("div.des");n.ajax({url:t.data("action-url"),type:"POST",data:e,beforeSend:function(){f.html("");u.html(u.data("wait-message"));i.show();r.show()},success:function(t,i){var r=n(t).filter("div");f.html(f.data("error-heading"));u.html(u.data("error-message"));i==="success"&&(r.text()==="AgentNotAuthorizeForPasswordReset"?(f.html(f.data("error-heading")),u.html(u.data("agent-not-eligible-error-message"))):r.text()!=="AgentNotFound"&&(f.html(f.data("success-heading")),u.html(u.data("success-message"))))}})};b.off().on("click",function(){var n=!1;v.html("");l.removeClass("has-error");c.removeClass("has-error");y?l.val().length?(w(l,h,o),l.val(""),f.find(".mfp-close").trigger("click"),h.show(),o.show()):n=!0:(p.validation("emailValidation",c),c.data("is-valid")?(w(c,h,o),c.val(""),f.find(".mfp-close").trigger("click"),h.show(),o.show()):n=!0);n&&(l.addClass("has-error"),y?v.append('<div class="bg-danger">'+a.agentID+"<\/div>"):v.append('<div class="bg-danger">'+a.email+"<\/div>"))})}},close:function(){s.removeClass("opening");t.grayOverlay&&s.removeClass("gray-items");t.scrollingPopup&&f.parents(".mfp-content").removeClass("scrolling-popup");t.passengerPopup&&f.parents("[data-edit-passenger]")["edit-passenger"]("reset")}};h.element.magnificPopup(t)},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new f(this,t))})};n.fn[i].defaults={items:{src:"#popup__offer",type:"inline"},haveTerms:!0,haveFlight:!0};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t){"use strict";function f(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="same-height",e=t.site,r=n(t),u=function(){var t=this,i=[];return t.checkHeight.length?(t.checkHeight.each(function(){var t=n(this);t.css("height","auto");i.push(t.height())}),Math.max.apply(null,i)):!1};f.prototype={init:function(){var t=this,f=t.options;if(t.checkHeight=t.element.find("[data-check-height]"),t.clickCheckHeight=n(f.clickTarget),t.clickCheckHeight.length)t.clickCheckHeight.off("click").on("click."+i,function(){setTimeout(function(){r.trigger("resize."+i)},10)});r.ready(function(){r.trigger("resize."+i)});r.on("resize."+i,function(){e.viewportWidth()>f.breakpoint&&u.call(t)?t.checkHeight.css("height",u.call(t)):t.checkHeight.attr("style","")})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new f(this,t))})};n.fn[i].defaults={breakpoint:767};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t){"use strict";function h(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="select-place",r=t.site,u=n(t),a=function(n){var t=this;t[n].show();t.overlay.show()},f=function(){var n=this,t=n.options;typeof t.page!="undefined"&&t.page==="homepage"&&(!r.isDesktop()&&n.isSelectedTo?n.element.is("form")?(n.element.find("[data-date-picker]").removeClass("hidden-xs"),n.element.find("[data-traveller-block]").removeClass("hidden-xs"),n.element.find("[data-promo-code]").removeClass("hidden-xs")):(n.element.parents("form").find("[data-date-picker]").removeClass("hidden-xs"),n.element.parents("form").find("[data-traveler-count]").removeClass("hidden-xs"),n.element.parents("form").find("[data-promo-code]").removeClass("hidden-xs")):n.element.is("form")?(n.element.find("[data-date-picker]").addClass("hidden-xs"),n.element.find("[data-traveller-block]").addClass("hidden-xs"),n.element.find("[data-promo-code]").addClass("hidden-xs")):(n.element.parents("form").find("[data-date-picker]").addClass("hidden-xs"),n.element.parents("form").find("[data-traveller-block]").addClass("hidden-xs"),n.element.parents("form").find("[data-promo-code]").addClass("hidden-xs")))},e=function(){var n=this;n.fromEle.hide();n.toEle.hide()},o=function(n,t){t&&(n.fromInput.val(t.html()),n.fromInputHidden.val(t.data("city-code")),n.isSelectedFrom=!0,n.fromInput.attr("data-city-code",t.data("city-code")),n.selectedFromCityId=t.data("city-id"),n.fromEle.hide(),n.toInput.val("").focus(),n.isSelectedTo=!1,n.toInput.removeAttr("data-city-code"),r.isNewChoice=!0,n.toInput.trigger("click."+i),n.options.page==="latest-offers"&&n.element.find(".ico").addClass("ico-close"))},s=function(n,t){t&&(n.toInput.val(t.html()),n.toInputHidden.val(t.data("city-code")),n.isSelectedTo=!0,n.toInput.attr("data-city-code",t.data("city-code")),n.DateReturn.datepicker("setDate",null),n.DateDepart.datepicker("setDate",null),n.selectedToCityId=t.data("city-id"),n.toEle.hide(),n.toInput.blur(),f.call(n),r.isNewChoice&&!0&&n.element.find(n.options.nextDatepicker).datepicker("show"))},c=function(){var i=this,c=i.groupFrom[i.selectedFromCityId],o=c.destinations,l=o.length,n="",s=0,r,f,e,h,u,t;for(i.groupTo.length=0,n+='<div class="country__wrap-outer">',n+='<div class="country__wrap-inner">',r=0;r<l;r++){for(f=o[r],n+='<div class="country__wrap">',n+="<p>"+f.country+"<\/p>",n+="<ul>",e=f.destinations,h=e.length,u=0;u<h;u++)t=e[u],n+='<li><a href="javascript:void(0);" data-city-id="'+s+'" data-city-name="'+t.station_name+'" data-city-code="'+t.station_code+'">'+t.station_name+" ("+t.station_code+")<\/a><\/li>",i.groupTo.push(t),s++;n+="<\/ul>";n+="<\/div>"}return n+='<div class="c-country__error hidden">No match found<\/div>',n+="<\/div>",n+"<\/div>"},l=function(n,t,i){for(var f=0,u,o,s,r=0;r<t;r++){var h=n[r],e=h.markets,c=e.length;for(u=0;u<c;u++){if(o=e[u],s=o.origin,s.station_code===i)return f;f++}}return-1};h.prototype={init:function(){var t=this,a=t.options,ft=a.type==="single"?0:1,v=r.json[ft],y=0,b=!1,k=!1,d,p,g,nt,rt,w,tt,h,ut,it;if(a.isCheckIn==!0&&(v=r.json[2]),typeof v=="undefined")return!1;for(d=v.length,t.lastWidth=u.width(),t.groupFrom=[],t.groupTo=[],t.htmlFrom="",t.htmlTo="",t.fromEle=t.element.find("[data-select-from]"),t.fromInput=t.element.find("[data-from-input]"),t.fromInputHidden=t.element.find("[data-from-input-hidden]"),t.toEle=t.element.find("[data-select-to]"),t.toInput=t.element.find("[data-to-input]"),t.toInputHidden=t.element.find("[data-to-input-hidden]"),t.DateDepart=t.element.find("[DateValue=depart]"),t.DateReturn=t.element.find("[DateValue=return]"),t.DestinationDatePopUp=n("#popup__HNLMaxSearch"),t.overlay=n(".overlayer"),t.selectedFromCityId,t.selectedToCityId,t.fromGenerated,t.toGenerated,t.isSelectedFrom=Boolean(n(t.fromInput).val())&&Boolean(n(t.fromInputHidden).val()),t.isSelectedTo=Boolean(n(t.toInput).val())&&Boolean(n(t.toInputHidden).val()),t.htmlFrom+='<div class="country__wrap-outer">',t.htmlFrom+='<div class="country__wrap-inner">',p=0;p<d;p++){for(g=v[p],t.htmlFrom+='<div class="country__wrap">',t.htmlFrom+="<p>"+g.country+"<\/p>",t.htmlFrom+="<ul>",nt=g.markets,rt=nt.length,w=0;w<rt;w++)tt=nt[w],h=tt.origin,t.htmlFrom+='<li><a href="javascript:void(0);" data-city-id="'+y+'" data-city-name="'+h.station_name+'" data-city-code="'+h.station_code+'">'+h.station_name+" ("+h.station_code+")<\/a><\/li>",t.groupFrom.push(tt),t.isSelectedFrom&&n(t.fromInputHidden).val()===h.station_code&&(t.selectedFromCityId=y),t.isSelectedTo&&n(t.toInputHidden).val()===h.station_code&&(t.selectedToCityId=y),y++;t.htmlFrom+="<\/ul>";t.htmlFrom+="<\/div>"}t.htmlFrom+='<div class="c-country__error hidden">No match found<\/div>';t.htmlFrom+="<\/div>";t.htmlFrom+="<\/div>";t.fromEle.html(t.htmlFrom);t.fromGenerated=t.fromEle.find("a");t.fromInput.on("click."+i,function(){t.toEle.hide();t.fromEle.show()});t.fromInput.blur(function(){n(this).val().length||(t.isSelectedFrom=!1,t.fromInput.removeAttr("data-city-code"))});t.fromInput.on("keydown."+i,function(n){n.which===13&&o(t,b)});t.fromInput.on("keyup."+i,function(i){var r=n(this).val().trim().toLowerCase();r.length?t.fromGenerated.each(function(){var t=n(this),i;t.html().toLowerCase().includes(r)?(t.parent().show(),t.parents(".country__wrap").show()):(i=t.parents(".country__wrap"),t.parent().hide(),t.parents("ul").children(":visible").length||i.hide())}):(t.fromEle.find(".country__wrap").show(),t.fromEle.find("li").show(),t.fromInput.click(),t.toInput.val(""));t.fromEle.find(".country__wrap:visible").length?(t.fromEle.find(".c-country__error").addClass("hidden"),t.element.data("is-check-in")&&t.fromInput.removeClass("has-error-selection")):(t.fromEle.find(".c-country__error").removeClass("hidden"),t.element.data("is-check-in")&&t.fromInput.addClass("has-error-selection"));i.which===13&&(t.fromEle.find(".country__wrap:visible").length||t.isSelectedFrom&&(t.fromInput.val("").click(),t.fromEle.find(".country__wrap").show(),t.fromEle.find("li").show(),t.fromEle.find(".c-country__error").addClass("hidden"),t.isSelectedFrom=!1,t.fromInput.removeAttr("data-city-code"),t.toInput.val(""),t.isSelectedTo=!1,t.toInput.removeAttr("data-city-code")))});t.fromEle.on("click."+i,"a",function(){var i=n(this);o(t,i)});t.fromEle.on("mouseover."+i,"a",function(){b=n(this)});t.fromEle.on("mouseleave."+i,"a",function(){b=!1});if(a.page==="latest-offers")t.element.on("click."+i,".ico",function(){var i=n(this);i.hasClass("ico-close")&&(t.fromInput.val(""),t.isSelectedFrom=!1,t.fromInput.removeAttr("data-city-code"),i.removeClass("ico-close"),t.fromInput.click(),t.fromEle.find(".c-country__error").addClass("hidden"),t.fromEle.find(".country__wrap").show(),t.fromEle.find("li").show())});t.toInput.on("click."+i,function(){t.isSelectedFrom?(t.toEle.html(c.call(t)),t.toGenerated=t.toEle.find("a"),t.fromEle.hide(),setTimeout(function(){t.toEle.show()},10)):(t.toEle.hide(),t.fromInput.click().focus())});t.toInput.blur(function(){n(this).val().length||(t.isSelectedTo=!1,t.toInput.removeAttr("data-city-code"))});t.toInput.on("keydown."+i,function(n){n.which===13&&s(t,k)});t.toEle.on("click."+i,"a",function(){var i=n(this);s(t,i)});t.toInput.on("keyup."+i,function(i){var r=n(this).val().trim().toLowerCase();r.length?t.toGenerated.each(function(){var t=n(this),i;t.html().toLowerCase().includes(r)?(t.parent().show(),t.parents(".country__wrap").show()):(i=t.parents(".country__wrap"),t.parent().hide(),t.parents("ul").children(":visible").length||i.hide())}):(t.toEle.find(".country__wrap").show(),t.toEle.find("li").show(),t.toInput.click(),t.toInput.val(""));t.toEle.find(".country__wrap:visible").length?t.toEle.find(".c-country__error").addClass("hidden"):t.toEle.find(".c-country__error").removeClass("hidden");i.which===13&&(t.toEle.find(".c-country__error").hasClass("hidden")||(t.toInput.val("").click(),t.toEle.find(".country__wrap").show(),t.toEle.find("li").show(),t.isSelectedTo=!1,t.toInput.removeAttr("data-city-code")))});t.toEle.on("mouseover."+i,"a",function(){k=n(this)});t.toEle.on("mouseleave."+i,"a",function(){k=!1});u.on("click."+i,function(r){n(r.target).parents("[data-"+i+"]").length||e.call(t)});u.on("resize."+i,function(){u.width()!==t.lastWidth&&(clearTimeout(ut),ut=setTimeout(function(){e.call(t);f.call(t)},250),t.lastWidth=u.width())});a.setFromCity&&(it=l(v,d,a.setFromCity),it!==-1&&(t.fromInput.attr("data-city-code",a.setFromCity),t.selectedFromCityId=it,t.isSelectedFrom=!0))},setFrom:function(n){var t=this;t.isSelectedFrom=!0;t.selectedFromCityId=n.data("city-id")},setTo:function(n){var t=this;t.isSelectedTo=!0;t.selectedToCityId=n.data("city-id");f.call(t)},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new h(this,t))})};n.fn[i].defaults={type:"single",nextDatepicker:"[data-depart]"};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t,i){"use strict";function a(t,i){this.element=n(t);this.options=n.extend({},n.fn[r].defaults,this.element.data(),i);this.init()}var r="select-seat",u=t.site,e=n("body"),h=n(t),f=function(){var n=this;n.popupNearExit.hide();n.popupNearExit.find("[data-emergency-message]").addClass("hidden");n.popupNearExit.find("[data-agree]").prop("checked",!1);n.overlay.hide();e.removeClass("opening")},c=function(){var n=this;n.popupNearExit15.hide();n.overlay.hide();e.removeClass("opening")},o=function(){var n=this;n.popupRemoveSeat.hide();n.overlay.hide()},s=function(){var n=this;n.popupSkipSeat.hide();n.overlay.hide()},v=function(t,i){var r=!1;return n.each(t,function(n,t){if(i.search(t)!==-1)return r=!0,!1}),r},y=function(){var n=this;return n.listSelected.length===n.seatLen},p=function(){var t=this,i=0;t.inputList.each(function(){var r=n(this).val();r!==""&&(t.listSelected.push(r),i++)});t.nextSeat=i},l=function(t){t.seatList.find("span.seat-number").each(function(i,r){var u=n(r),f=u.hasClass("seat-number--selected")?u.html():"";t.inputList.eq(i).val(f)});t.transitionOverlay.removeClass("hidden");setTimeout(function(){t.form.submit()},1500)};a.prototype={init:function(){var a=this,k=a.options,w,b;a.lastWidth=h.width();a.seatFilter=a.element.find("[data-seat-filter]");a.seat=a.element.find("[data-seat]");a.seatList=a.element.find("[data-seat-list]").children();a.seatLen=a.seatList.length;a.listSelected=[];a.nextSeat=0;a.form=a.element.find("[data-select-seat-form]");a.inputList=a.element.find(".seat-flights-nav input[type=hidden]");a.popupNearExit=n("#popup__nearExit");a.popupNearExit15=n("#popup__nearExit15");a.popupRemoveSeat=n("#popup__removeSeat");a.popupSkipSeat=n("#popup__skipseat");a.overlay=n(".overlayer");a.nextFlightButton=n("#nextFlightButton");a.transitionOverlay=n(".transition-layer");a.listChecked=[];p.call(a);a.seatFilter.on("change."+r,"input[type=checkbox]",function(){var t=n(this),i=t.val();t.is(":checked")?a.listChecked.push(i):a.listChecked=n.grep(a.listChecked,function(n){return n!==i});a.seat.find("[data-kind-seat]").each(function(){var t=n(this);v(a.listChecked,t.data("kind-seat"))?t.addClass("filtered"):t.removeClass("filtered")});a.seatFilter.find("input:checked").length?a.seat.addClass("has-filter"):a.seat.removeClass("has-filter")});a.popupNearExit.off("click");a.popupNearExit.on("click."+r,".mfp-layer",function(){f.call(a)});a.popupNearExit.on("click."+r,".btn-close",function(){f.call(a)});a.popupNearExit.on("click."+r,".btn",function(){var t=n(this),i=a.popupNearExit.find("[data-agree]").is(":checked"),r=a.popupNearExit.find("[data-emergency-message]");typeof t.data("btn-accept")!="undefined"?i?(w.data("accept",!0),w.click(),f.call(a)):r.removeClass("hidden"):f.call(a)});a.popupNearExit15.on("click."+r,".btn",function(){var t=n(this);typeof t.data("btn-accept")!="undefined"?(w.data("accept",!0),w.click(),c.call(a)):c.call(a)});a.popupRemoveSeat.on("click."+r,".mfp-layer",function(){o.call(a)});a.popupRemoveSeat.on("click."+r,".btn-close",function(){o.call(a)});a.popupRemoveSeat.on("click."+r,".btn",function(){var t=n(this);t.data("btn-remove")&&(b.data("remove",!0),b.trigger("click"));o.call(a)});a.popupSkipSeat.on("click."+r,".mfp-layer",function(){s.call(a)});a.popupSkipSeat.on("click."+r,".btn-close",function(){s.call(a)});a.popupSkipSeat.on("click."+r,".btn",function(){s.call(a)});a.seatList.on("click."+r,function(t){t.preventDefault();var i=n(this);if(!u.isDesktop())return!0;i.siblings().removeClass("selected-item");i.addClass("selected-item");a.nextSeat=i.index()});a.seat.on("click."+r,".seat-pos",function(t){var y,h,c,p,r;t.preventDefault();var i=n(this),l=i.find("span"),o=l.html(),g=i.parents(".fly_body_in").siblings().find("[data-board]").children(),nt=g.eq(i.index()),d=nt.find("span"),tt=i.find(".taken-seat").length,s;if(tt)return!1;if(u.isDesktop()||(s=a.seatList.filter(".slick-current"),a.nextSeat=s.index()),n.inArray(o,a.listSelected)===-1){var f=a.seatList.eq(a.nextSeat).find(".short-item span"),it=i.data("kind-seat").search("near-exit")!==-1?!0:!1,v=!1,rt=f.prev().data("is-over-fifteen");it?(a.nextSeat--,i.data("accept")?(a.nextSeat++,i.removeData("accept"),v=!0):(w=i,rt?a.popupNearExit.show():a.popupNearExit15.show(),a.overlay.show(),e.addClass("opening"))):v=!0;v&&(f.hasClass("seat-number--selected")&&(y=f.html(),a.seat.find('[data-board] [data-kind-seat] [title="'+y+'"] .seat').removeClass("mine-seat selected"),a.listSelected=n.grep(a.listSelected,function(n){return n!==y}),f.removeClass("seat-number--selected")),u.isDesktop()||(h=s.find(".seat-number--selected"),c=h.length?h.html():"",c.length&&(h.removeClass("seat-number--selected"),a.seat.find('[title="'+c+'"]').children().removeClass("mine-seat selected"),f=a.seatList.eq(s.index()).find(".short-item span"),a.listSelected=n.grep(a.listSelected,function(n){return n!==c}))),a.listSelected.push(o),f.html(o),f.addClass("seat-number--selected"),p=l.parent(),p.attr("data-username",a.seatList.eq(a.nextSeat).find("[data-arrow-name]").data("arrow-name")),p.addClass("mine-seat selected"),d.parent().addClass("mine-seat selected"))}else!i.data("remove")&&k.showPopupRemove?(b=i,a.popupRemoveSeat.show(),a.overlay.show()):(i.data("remove",!1),k.showPopupRemove=!1,l.parent().removeClass("mine-seat selected"),d.parent().removeClass("mine-seat selected"),a.listSelected=n.grep(a.listSelected,function(n){return n!==o}),a.seatList.find("span.seat-number--selected").each(function(){var t=n(this);if(t.html()===o)return t.removeClass("seat-number--selected").html(""),a.nextSeat=t.parents(".item").index(),!1}));ScootBook.SeatSelectAjax&&ScootBook.SeatSelectAjax();r=a.seatList.find(".seat-number:not(.seat-number--selected)").first().parents(".item").eq(0);r.length?(r.siblings().removeClass("selected-item"),r.addClass("selected-item"),a.nextSeat=r.index()):(a.nextSeat=a.nextSeat===a.seatLen-1?0:Math.min(++a.nextSeat,a.seatLen-1),r=a.seatList.eq(a.nextSeat).find(".short-item span").closest(".item"),r.siblings().removeClass("selected-item"),r.addClass("selected-item"));a.slideToUser()});a.element.on("click."+r,"[data-submit-button]",function(){var t=a.seatList.find("span.seat-number"),i=t.filter(".seat-number--selected").length;i<a.inputList.length?(a.popupSkipSeat.show(),a.overlay.show()):(a.transitionOverlay=n(n(this).data("submit-transition")),l(a))});a.nextFlightButton.on("click",function(){var r=n("a[data-next-flight]");r.data("redirect-to")!=""&&r.data("redirect-to")!=i?r.click():(t.location.href=n("a[data-redirect-to]").data("redirect-to"),n(".transition-3").removeClass("hidden"))});a.element.on("click."+r,"[data-next-flight]",function(t){t.preventDefault();a.transitionOverlay=n(".transition-nextflight");l(a)});a.element.on("click."+r,"[data-remove-selected-seat]",function(n){n.preventDefault();a.listSelected.length=0;a.seatList.find("span.seat-number--selected").removeClass("seat-number--selected");a.seat.find(".mine-seat.selected").removeClass("mine-seat selected");a.nextSeat=0});h.ready(function(){y.call(a)&&(a.nextSeat=0)})},slideToUser:function(){var t=this;u.isDesktop()||n("[data-seat-list]")["slick-slider"]("goTo",t.nextSeat)},destroy:function(){n.removeData(this.element[0],r)}};n.fn[r]=function(t,i){return this.each(function(){var u=n.data(this,r);u?u[t]&&u[t](i):n.data(this,r,new a(this,t))})};n.fn[r].defaults={showPopupRemove:!1};n(function(){n("[data-"+r+"]")[r]()})}(jQuery,window),function(n,t){"use strict";function o(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="show-below",f="sb-active",e=t.site,r=n(t),s=function(){n("[data-"+i+"]").each(function(){var t=n(this),i=t.find("[data-same-detail]"),r=t.find("[data-overlay-target]");i.length&&i.hide();r.length&&n(r.data("overlay-target")).hide()})},u=function(){n("[data-"+i+"]").each(function(){var t=n(this);t.parent().find(".active").not(".tab-pane, [data-card-type]").removeClass("active");t.find("[data-title]").not("[data-manual-close]").removeClass(f);t.find("[data-detail]").hide()})},h=function(n){n.parent().toggleClass("active")};o.prototype={init:function(){var o=this,ut=!1,st=o.options,vt=n("body"),w=n("[data-btn-edit]"),a=n("[data-content-credit-card]"),ht,ft,p,et,c,at,ot;o.lastWidth=r.width();o.element.on("click."+i,"[data-title]",function(t){t.preventDefault();var r=n(this),s=r.parent().find("[data-detail]");r.parent().find("[data-detail-special]").length?r.parents("[data-select-place]").siblings().find("[data-detail-special]").hide():r.parents("[data-"+i+"]").find("[data-detail-special]").hide();ut||(ut=!0,u(),s.toggle(),typeof r.data("detail-target")!="undefined"&&(o.element.find(r.data("detail-target")).toggle(),typeof r.data("btn-toggle")=="undefined"&&w.toggleClass("hidden")),typeof r.data("freezer-page")!="undefined"&&(e.isDesktop()||vt.toggleClass("opening")),typeof r.data("overlay-target")!="undefined"&&n(r.data("overlay-target")).show(),r.toggleClass(f),typeof r.data("title-class")!="undefined"&&r.toggleClass(r.data("title-class")),st.addClassForParent===!0&&h(r),ut=!1);a.length&&a.addClass("focus")});o.element.on("click."+i,"[data-icon-close]",function(){var t=n(this);u.call(o);typeof t.data("title-target")!="undefined"&&o.element.find(t.data("title-target")).click()});r.on("click.outClose",function(t){if(n(t.target).parents("[data-"+i+"]").length||n(".ui-datepicker").css("display")!=="none"||(u.call(o),s(),e.isNewChoice=!1,a.hasClass("focus")&&a.removeClass("focus")),w.length){var r=w.parents(".booking-edit__header");r.length&&!r.next().is(":visible")&&w.removeClass("hidden")}});r.on("resize."+i,function(){r.width()!==o.lastWidth&&(clearTimeout(ht),ht=setTimeout(function(){u.call(o)},250),o.lastWidth=r.width())});if(st.isMember){var v=n("[data-wrapper-payment]"),b=v.find("[data-card-number]"),k=v.find("[data-exp-month]"),d=v.find("[data-exp-year]"),g=v.find("[data-holder-name]"),nt=v.find("[data-card-ccv]"),l=v.find("[data-card-type]"),tt=n("#card_pairs_data"),t,y,ct,lt,it=[],yt=n("#card_pairs_data").attr("imgpath"),rt=v.find("#cardAccountNumId");if(t=tt.length?JSON.parse(tt.html()):[],t.length>0){for(y=t[0],ft='<div data-choose-credit-card="" data-new-card="" class="dropdown__row"><div class="content"> <div data-card-type-dropdown="" class="text number-card">New Credit Card<\/div><\/div><\/div>',p="",c=0;c<t.length;c++)c===t.length-1?p="dropdown__row-last":p,et='<img src="'+yt+"/"+t[c].type.toLowerCase()+'.svg" alt="'+t[c].type+'">',at='<div data-choose-credit-card class="dropdown__row"><div class="text">'+t[c].accountname+'<\/div><div class="content">'+et+'<span data-card-type-dropdown="'+t[c].type+'"class="number-card '+p+'">*** '+t[c].accountnumber.substring(12)+"<\/span><\/div><\/div><\/div>",c===0&&a.html(et+'<span data-card-type-dropdown="'+t[c].type+' "class="number-card '+p+'">*** '+t[c].accountnumber.substring(12)+"<\/span>"),ft+=at;v.find(".dropdown__wrapper").html(ft);ct=y.type.toLowerCase();b.prop("readonly","readonly").val(y.accountnumber);rt.val(y.id);k.val(y.expirymonth);d.val(y.expiryyear);g.val(y.accountname);nt.val("");switch(ct.toLowerCase()){case"vv":case"vi":n("#visa_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#visa_radio").val());n("#ccFee").val(n("#visa_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#visa_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="visa"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#visa_radio").attr("waiveFee")).trigger("change");break;case"mc":case"mm":n("#mastercard_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#mastercard_radio").val());n("#ccFee").val(n("#mastercard_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#mastercard_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="mastercard"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#mastercard_radio").attr("waiveFee")).trigger("change");break;case"aa":case"ax":n("#express_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#express_radio").val());n("#ccFee").val(n("#express_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#express_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="amex"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#express_radio").attr("waiveFee")).trigger("change");break;case"jb":n("#jcb_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#jcb_radio").val());n("#ccFee").val(n("#jcb_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#jcb_radio").attr("perpaxpersegfee")).trigger("change");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#jcb_radio").attr("waiveFee")).trigger("change");l.filter('[data-card-type="jcb"]').addClass("active")}}else n("#selectedpaymentMethod").val(""),n("#ccFee").val("0").trigger("change"),n("#perPaxPerSegFeePrice").val(0).trigger("change"),n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(0).trigger("change"),l.removeClass("active"),b.prop("readonly","").val(""),rt.val(0),k.val(""),d.val(""),g.val(""),nt.val(""),ot=n('[name="ccType"]:checked'),ot&&n(ot).each(function(){n(this).prop("checked",!1)}),lt=v.find('[data-card-type-dropdown=""]').closest(".content").html(),a.html(lt)}o.element.on("click."+i,"[data-choose-credit-card]",function(){var f=n(this),h=f.find(".content").html(),e,s,r,i;if(a.html(h),u.call(o),a.hasClass("focus")&&a.removeClass("focus"),e=a.find(".number-card").length,e>0)if(v.find(".input-error, .has-error").removeClass("input-error has-error"),l.removeClass("active"),t=tt.length?JSON.parse(tt.html()):[],s=f.find("[data-card-type-dropdown]"),r=s.attr("data-card-type-dropdown"),it=[],n.each(t,function(n,t){it.push(t.type.toLowerCase())}),n.inArray(r.toLowerCase(),it)!==-1){i=t[it.indexOf(r.toLowerCase())];b.prop("readonly","readonly").val(i.accountnumber);rt.val(i.id);k.val(i.expirymonth);d.val(i.expiryyear);g.val(i.accountname);nt.val("");switch(r.toLowerCase()){case"vv":case"vi":n("#visa_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#visa_radio").val());n("#ccFee").val(n("#visa_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#visa_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="visa"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#visa_radio").attr("waiveFee")).trigger("change");break;case"mm":case"mc":n("#mastercard_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#mastercard_radio").val());n("#ccFee").val(n("#mastercard_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#mastercard_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="mastercard"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#mastercard_radio").attr("waiveFee")).trigger("change");break;case"aa":case"ax":n("#express_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#express_radio").val());n("#ccFee").val(n("#express_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#express_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="amex"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#express_radio").attr("waiveFee")).trigger("change");break;case"jb":n("#jcb_radio").prop("checked",!0);n("#selectedpaymentMethod").val(n("#jcb_radio").val());n("#ccFee").val(n("#jcb_radio").attr("fee")).trigger("change");n("#perPaxPerSegFeePrice").val(n("#jcb_radio").attr("perpaxpersegfee")).trigger("change");l.filter('[data-card-type="jcb"]').addClass("active");n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(n("#jcb_radio").attr("waiveFee")).trigger("change")}}else n("#selectedpaymentMethod").val(""),n("#ccFee").val("0").trigger("change"),n("#perPaxPerSegFeePrice").val(0).trigger("change"),n("#convenienceFeeWaiver")&&n("#convenienceFeeWaiver").val(0).trigger("change"),l.removeClass("active"),b.prop("readonly","").val(""),rt.val(0),k.val(""),d.val(""),g.val(""),nt.val("")})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new o(this,t))})};n.fn[i].defaults={addClassForParent:!1};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="show-stuff";i.prototype={init:function(){var n=this;n.vars={stuffContent:n.element.find("[data-stuff-details]"),stuffBtn:n.element.find("[data-view-stuff]"),stuffArrow:n.element.find("[data-stuff-icon]")};n.element.on("click."+t,"[data-view-stuff]",function(){n.vars.stuffContent.toggleClass("active");n.vars.stuffBtn.toggleClass("active");n.vars.stuffArrow.hasClass("ico-down-arrow")?(n.vars.stuffArrow.removeClass("ico-down-arrow"),n.vars.stuffArrow.addClass("ico-up-arrow")):(n.vars.stuffArrow.removeClass("ico-up-arrow"),n.vars.stuffArrow.addClass("ico-down-arrow"))})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function r(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="show-toggle";r.prototype={init:function(){var r=this,e=r.options,u=[],f,o;r.current=r.element.find("[data-toggle-active]");r.toggleBtns=r.element.find("[data-toglle-btn]");r.toggleElement=r.element.find("[data-toggle-element]");r.btnNextPlease=r.element.find("[data-btn-next-please]");r.btnFindFlights=r.element.find("[data-btn-find-flights]");r.toggleElement.addClass("toggle-e");r.current.addClass("toggle-visible");f=[];o=[];r.toggleBtns.each(function(n){f.push(r.toggleBtns.eq(n).html());o.push(r.toggleBtns.eq(n).attr("data-btn-toggle-template")||f[n])});u.currentText=f;u.activeText=o;r.element.on("click."+i,"[data-toglle-btn]",function(){var i=n(this),s=r.toggleBtns.index(i),f=r.toggleBtns[s],o;i.data("manual-click")||(r.activeState=e.activeBtnState?r.element.attr("data-active-btn-state"):"btn-toggle-active",typeof f.checked=="undefined"&&(f.currentText=i.html(),f.checked=!0),i.activeText=i.attr("data-btn-toggle-template")!=="undefined"?i.attr("data-btn-toggle-template"):f.currentText,i.toggleClass("toggle",function(){e.multiBtn?i.hasClass("toggle")?(i.html(i.activeText),i.addClass(r.activeState),r.element.addClass("active-toggle")):(i.html(f.currentText),i.removeClass(r.activeState),r.element.removeClass("active-toggle")):r.element.hasClass("active-toggle")?(r.toggleBtns.each(function(n){r.toggleBtns.eq(n).html(u.currentText[n])}),r.element.removeClass("active-toggle")):(r.toggleBtns.each(function(n){r.toggleBtns.eq(n).html(u.activeText[n])}),r.element.addClass("active-toggle"),i.data("btn-back-to-flights")&&i.parents("form").find("[data-btn-back-to-flights]").addClass("hidden"))}),e.multiBtn?(o=r.element.find("."+r.activeState).length,o>0?r.toggleElement.hasClass("toggle-visible")||(r.toggleElement.toggleClass("toggle-visible",!0),r.btnNextPlease.toggleClass("hidden",!0),r.btnFindFlights.toggleClass("hidden",!0)):r.toggleElement.hasClass("toggle-visible")&&(r.toggleElement.toggleClass("toggle-visible",!1),r.btnNextPlease.toggleClass("hidden",!1),r.btnFindFlights.toggleClass("hidden",!1))):(r.toggleElement.toggleClass("toggle-visible"),r.toggleElement.filter(".departure-flights.toggle-visible").length&&n(t).trigger("resize.slick-slider"),r.btnNextPlease.toggleClass("hidden"),r.btnFindFlights.toggleClass("hidden")))});r.btnFindFlights.on("click."+i,function(n){var t=r.element.find("form#LowFareFinderForm");t.submit();n.preventDefault()})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,u){return this.each(function(){var f=n.data(this,i);f?f[t]&&f[t](u):n.data(this,i,new r(this,t))})};n.fn[i].defaults={};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t){"use strict";function o(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="slick-slider",s=t.site,u=n(t),r=!0,e=function(){var n=this,h=n.allSlides.length,i=n.element.find(".slick-slide").eq(h-1),r=n.element.css("width","").outerWidth(),f=parseInt(i.position().left+i.outerWidth()),t=n.element.find(".active"),c=n.element.is(":hidden"),u=n.element.data("parent-selector"),e=n.element.data("toggle-class"),o,s;c&&u.length>0&&(n.element.parents(u).toggleClass(e),r=n.element.css("width","").outerWidth(),f=parseInt(i.position().left+i.outerWidth()),n.element.parents(u).toggleClass(e));t.length||(t=n.element.find(".slick-active:first"));o=t.data("slick-index");s=t.position().left+t.outerWidth();f<=r?n.check||(n.element.slick("slickSetOption","draggable",!1,!0),n.element.slick("slickSetOption","swipe",!1,!0),n.element.slick("slickSetOption","arrows",!1,!0),n.check=!0):n.check&&(n.element.slick("slickSetOption","draggable",!0,!0),n.element.slick("slickSetOption","swipe",!0,!0),n.element.slick("slickSetOption","arrows",!0,!0),n.check=!1);s<=r?n.element.slick("slickGoTo",0):n.element.slick("slickGoTo",o)},f=function(n){var t=this,u=n.currentSlide,f=u+1,e=u-1,o=t.element.find(".slick-next"),s=t.element.find(".slick-prev"),r=t.element.find(".item").eq(f).find(".full-item").attr("data-arrow-name"),i;typeof r=="undefined"&&(r="");o.html('<span class="title">'+r+"<\/span>");i=t.element.find(".item").eq(e).find(".full-item").attr("data-arrow-name");typeof i=="undefined"&&(i="");s.html('<span class="title">'+i+"<\/span>")};o.prototype={init:function(){var t=this,o=t.options,h,c;switch(o.beforeInit){case"grid-main":u.on("resize.grid-main load.grid-main",function(){if(s.viewportWidth()>=769){var n=t.element.parent().find(".grid__item").first(),i=n.height(),r=parseInt(n.css("paddingRight"));t.element.height(i-r);t.element.find(".offers__main__img").height(i+r);t.element.css("overflow","hidden")}else t.element.css("height","auto"),t.element.find(".offers__main__img").css("height","auto")})}o.responsiveFor==="with-friend"&&(o.responsive=[{breakpoint:480,settings:{slidesToShow:2,vertical:!0,verticalSwiping:!0}}]);o.responsiveFor==="flight-date-nav"&&(o.responsive=[{breakpoint:992,settings:{slidesToShow:5,infinite:!1}},{breakpoint:480,settings:{slidesToShow:3,infinite:!1}}]);o.nextbtn&&o.prevbtn&&(o.nextArrow=n(o.nextbtn),o.prevArrow=n(o.prevbtn));t.allSlides=t.element.find(".slick-slide");t.element.on("click."+i,".slick-slide",function(){var t=n(this);typeof o.scrollTab!="undefined"&&o.scrollTab&&(t.siblings().removeClass("active"),t.addClass("active"))});if(setTimeout(function(){t.element.data("align-center")&&t.alignCenter()},10),o.showArrowName){t.element.on("init",function(n,i){typeof i!="undefined"&&f.call(t,i)});t.element.on("afterChange."+i,function(n,i){typeof i!="undefined"&&f.call(t,i)});t.element.on("reInit",function(n,i){typeof i!="undefined"&&f.call(t,i)})}o.centerActive&&(h=this.computeCurrentSlide(),o.initialSlide=h);t.element.slick(o);o.scrollTab&&(t.check=!1,e.call(t));o.showTablet&&u.width()>992&&(t.element.slick("unslick"),r=!1);o.isPaymentFlow&&n("[role='tab']").each(function(){n(this).click(function(){var u=n(this).parents("div.tab.slick-slide"),r,t,i;u.hasClass("active")==!1&&(n("#ccFee").val(0).trigger("change"),n("#perPaxPerSegFeePrice").val(0).trigger("change"),r=0,t=0,u.data("is-credit-card")==!0?(i=n('[name="ccType"]:checked'),i&&(r=n(i[0]).attr("fee"),t=n(i[0]).attr("perpaxpersegfee"),n("#selectedpaymentMethod").val(i[0].value))):(r=n(this).attr("fee"),t=n(this).attr("perpaxpersegfee"),n("#selectedpaymentMethod").val(n(this).data("method"))),n("#ccFee").val(r).trigger("change"),n("#perPaxPerSegFeePrice").val(t).trigger("change"),t==0?n("#perPaxText").hide():n("#perPaxText").show())})});u.on("resize."+i,function(){clearTimeout(c);c=setTimeout(function(){if(o.scrollTab&&e.call(t,1),t.element.data("align-center")&&t.alignCenter(),o.responsiveFor==="flight-date-nav"){var n=o.centerActive?t.computeCurrentSlide():t.element.find(".tab.active").index();t.element.slick("slickGoTo",n)}o.showTablet&&(u.width()>992?r&&(t.element.slick("unslick"),r=!1):r||(t.element.slick(o),r=!0))},400)}).trigger("resize")},afterInnit:function(){},destroy:function(){n.removeData(this.element[0],i)},goTo:function(n){var t=this;t.element.slick("slickGoTo",n)},computeCurrentSlide:function(){var r=this.options,u=this.element.find(".tab.active").index(),t=this.getResponsiveSettings(),f=this.element.children().length,n=0,i;return i=t?t.slidesToShow:r.slidesToShow,n=u-Math.ceil(i/2)+1,n<0?0:n},getResponsiveSettings:function(){var t=null,r=this.options,i=r.responsive||null,u=this.getCurrentBreakpoint();return i&&n.each(i,function(n,i){u===i.breakpoint&&(t=i.settings)}),t},getCurrentBreakpoint:function(){var f=t.innerWidth||n(t).width(),e=this.options,r=e.responsive||null,i=[],u=[];return r?(n.each(r,function(n,t){i.push(t.breakpoint)}),i=i.sort(function(n,t){return n>t}),u=i.filter(function(n){return f<n}),u[0]||null):null},alignCenter:function(){var e=this,t=e.element,f,r=t.find(".slick-slide"),u=0,i;if(r.length)for(i=0;i<r.length;i++)u+=n(r[i]).outerWidth();t.outerWidth("");f=t.outerWidth();f>=u&&t.outerWidth(u)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new o(this,t))})};n.fn[i].defaults={arrows:!1,dots:!0};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="slider-ui";i.prototype={init:function(){var n=this,t=n.options;n.element.slider(t)},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function f(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="sticky-menu",u=n(t),r=t.site,e=function(){var n=this,f=n.options,t,i;n.scrollTop=u.scrollTop();t=0;i=0;r.isDesktop()?(t="auto",i=0):(t=0,i="auto");n.scrollTop>=n.startingPoint?(r.isDesktop()||n.scrollPart.css("margin-top",n.leftMenuHeight),n.fixedPart.addClass("sticky-fixed-menu"),n.fixedPart.css("top",t),n.fixedPart.css("bottom",i),n.scrollPart.addClass("sticky-scroll-menu")):(n.fixedPart.removeClass("sticky-fixed-menu"),n.scrollPart.removeClass("sticky-scroll-menu"),n.fixedPart.removeAttr("style"),n.scrollPart.removeAttr("style"));f.stickyLimit&&(n.scrollTop>=n.bottomScroll?(n.fixedPart.addClass("sticky-absoluted-menu"),r.isDesktop()&&(n.fixedPart.css("top","auto"),n.fixedPart.css("bottom",n.absolutedBottom))):n.fixedPart.removeClass("sticky-absoluted-menu"))};f.prototype={init:function(){var t=this,f=t.options;t.element.addClass("sticky-menu");t.headerSpace=n(".header").outerHeight(!0)+20;t.fixedPart=t.element.find("[data-sticky-fixed]");t.scrollPart=t.element.find("[data-sticky-scroll]");t.bottomScroll=0;t.litmitArea="";t.absolutedBottom=0;t.winHeight=u.height();t.fixedPartTop=t.fixedPart.offset().top;t.leftMenuHeight=t.fixedPart.find("aside").outerHeight(!0);t.startingPoint=t.fixedPartTop+t.leftMenuHeight-t.winHeight;r.isDesktop()||(t.startingPoint=t.fixedPart.offset().top);t.scrollTop=0;t.litmitArea=t.element.find("[data-sticky-limit-area]");t.bottomScroll=t.litmitArea.offset().top+t.litmitArea.outerHeight();t.bottomScroll-=r.isDesktop()?t.winHeight:t.fixedPart.height();f.stickyLimit&&(t.absolutedBottom=t.scrollPart.height()-t.litmitArea.height());u.on("scroll."+i,function(){e.call(t)})},destroy:function(){var t=this;t.element.removeClass("sticky-menu");n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new f(this,t))})};n.fn[i].defaults={};n(function(){n("[data-"+i+"]")[i]({})})}(jQuery,window),function(n,t){"use strict";function u(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="sync-booking",r=t.site,f=function(n,t){var i=n.find("[data-traveler-count]"),u=i.find("[data-adult]").html(),f=i.find("[data-child]").html(),e=i.find("[data-infant]").html(),o=i.find("[data-total]").val(),r=t.find("[data-traveler-count]");r["traveler-count"]("setAdult",u);r["traveler-count"]("setChild",f);r["traveler-count"]("setInfant",e);r["traveler-count"]("setTotal",o)};u.prototype={init:function(){var t=this;t.customTab=t.element.find("[data-custom-tab]");t.currentTab=t.element.find(t.customTab.eq(0).data("target"));t.customTab.on("click."+i,function(){var p=n(this),i=t.element.find(p.data("target")),u=i.find("[data-select-place]"),w=t.currentTab.find("[data-is-multi-city]").length,c=t.currentTab.find("[data-sync-from]"),l=c.data("city-code"),e=c.val(),a=t.currentTab.find("[data-sync-to]"),v=a.data("city-code"),o=a.val(),b=t.currentTab.find("[data-sync-depart]"),y=b.val(),s=t.currentTab.find("[data-sync-promo-code]"),h=!w&&r.isDesktop()&&s.eq(1).length?s.eq(1).val():s.eq(0).val(),k=i.find("[data-sync-from]"),d=i.find("[data-sync-to]"),g=i.find("[data-sync-depart]"),nt=i.find("[data-sync-promo-code]");typeof e!="undefined"&&e.length&&(k.val(e),typeof l!="undefined"&&u["select-place"]("setFrom",u.find("[data-select-from] [data-city-code="+l+"]:first")));typeof o!="undefined"&&o.length&&(d.val(o),typeof v!="undefined"&&(r.isNewChoice=!0,u["select-place"]("setTo",u.find("[data-select-to] [data-city-code="+v+"]:first"))));y.length&&g.val(y);typeof h!="undefined"&&h.length&&nt.val(h);f(t.currentTab,i);t.currentTab=i})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var f=n.data(this,i);f?f[t]&&f[t](r):n.data(this,i,new u(this,t))})};n.fn[i].defaults={};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="sync-tab-select";i.prototype={init:function(){var i=this,r=i.options;if(i.tab=i.element.find(r.tabTarget),i.select=i.element.find(r.selectTarget),i.tab.length&&i.select.length){i.tab.on("click."+t,r.tabDelegate,function(){var t=n(this),r=i.select.find("option").removeAttr("selected").eq(t.index());t.siblings().removeClass("active");i.select.val(r.val())});i.select.on("change",function(){var n=i.select.find("option:selected");i.tab.find(r.tabDelegate).eq(n.index()).find("a").click()})}},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n,t){"use strict";function o(t,r){this.element=n(t);this.options=n.extend({},n.fn[i].defaults,this.element.data(),r);this.init()}var i="tab-accordion",u=t.site,f=n("html, body"),r=n(t),e=function(){var t=this;t.accEleChild.removeClass("active").each(function(){n(this).find("[data-acc-content]").removeClass("in")})};o.prototype={init:function(){var t=this;t.lastWidth=r.width();t.tabEle=t.element.find("[data-tab-ele]");t.accEle=t.element.find("[data-acc-ele]");t.tabEleChild=t.tabEle.children();t.accEleChild=t.accEle.children();t.logoHeight=n("header .logo").outerHeight();t.element.css("position","relative");t.tabEle.after(t.tabEle.clone().addClass("clone"));t.tabEleClone=t.element.find(".clone");t.tabEle.css("visibility","hidden");t.tabEleClone.css({position:"absolute",top:"0"});r.on("scroll."+i,function(){r.scrollTop()+t.logoHeight>t.tabEle.offset().top?t.tabEleClone.css({position:"fixed",top:t.logoHeight}):t.tabEleClone.css({position:"absolute",top:"0"});t.tabEleClone.offset().top-t.tabEle.offset().top+t.tabEle.height()>t.accEle.outerHeight()&&t.tabEleClone.css({position:"absolute",top:t.accEle.outerHeight()-t.tabEle.height()})});t.element.on("click."+i,"[data-acc-heading]",function(){var o=n(this),i=o.parents(".tab-pane"),r;if(i.hasClass("active"))return!1;e.call(t);i.addClass("active");t.tabEleClone.children().removeClass("active").eq(i.index()).addClass("active");u.isDesktop()||(r=i.offset().top-t.logoHeight,f.scrollTop(r))});t.element.on("click."+i,"[data-tab-heading]",function(){var u=n(this),i=u.parent(),r=t.accEle.children(),o=r.eq(i.index());(f.scrollTop(t.accEle.offset().top-t.logoHeight),i.hasClass("active"))||(r.removeClass("active"),o.addClass("active"),e.call(t))});r.on("resize."+i,function(){r.width()!==t.lastWidth&&(t.logoHeight=n("header .logo").outerHeight(),u.isDesktop()||t.accEle.find(".active").find("[data-acc-content]").addClass("in"),t.lastWidth=r.width())})},destroy:function(){n.removeData(this.element[0],i)}};n.fn[i]=function(t,r){return this.each(function(){var u=n.data(this,i);u?u[t]&&u[t](r):n.data(this,i,new o(this,t))})};n.fn[i].defaults={};n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,t,i){"use strict";function c(t,i){this.element=n(t);this.options=n.extend({},n.fn[r].defaults,this.element.data(),i);this.init()}var r="traveler-count",o=!1,f=t.l10n,e=t.site,s=function(n,t,i){n.data(t,i);n.html(i)},h=function(n,t){return t.wrapper?n.parents(t.wrapper).find("span").first():n.parent().find("span").first()},u=function(n,t,i,r){var u=parseInt(n.data(t)),s;if(o=!1,i)u++;else{if(t==="adult"){if(u<=1)return}else if(u<=0)return;u--;o=!0}n.data(t,u);r&&(r.errorArea=r.element.find(".error-mess"),r.travelErr=r.element.find("[data-traveler-error]"),r.totalInput=r.element.find("[data-total]"),s=f.getLabel(e.lang,"validation"),r.options.bookingValidate&&(s=f.getLabel(e.lang,"bookingValidation")),r.infant.data("infant")>r.adult.data("adult")?(r.element.addClass("validating"),r.travelErr.length===0&&(r.errorArea.append('<div class="bg-danger" data-traveler-error>'+s.travaler+"<\/div>"),r.totalInput.addClass("has-error"),r.totalInput.removeClass("has-success"))):(r.errorArea.find("[data-traveler-error]").remove(),r.totalInput.removeClass("has-error"),r.totalInput.addClass("has-success"),r.element.removeClass("validating")));t==="total"?(u+=u>1?" "+f.getLabel(e.lang,"traveler"):" "+f.getLabel(e.lang,"travelers"),n.val(u)):(n.siblings("input").val(u),n.html(u))};c.prototype={init:function(){var t=this,s=t.options,v,y,c,l,a;t.infant=t.element.find("[data-infant]");t.child=t.element.find("[data-child]");t.adult=t.element.find("[data-adult]");t.totalEle=t.element.find("[data-total]");v=t.infant.data("infant")!==i?t.infant.data("infant"):0;t.infant.data("infant",v);y=t.child.data("child")!==i?t.child.data("child"):0;t.child.data("child",y);c=t.adult.data("adult")!==i?t.adult.data("adult"):1;t.adult.data("adult",c);l=t.totalEle.data("total")!==i?t.totalEle.data("total"):c+y+v;t.totalEle.data("total",l);a=n("[data-traveler-count-override]");a.length!==0&&(a[0].hasAttribute("max-value")&&(s.maxTraveler=parseInt(a.attr("max-value"))),a[0].hasAttribute("min-value")&&(s.minTraveler=parseInt(a.attr("min-value")),l<s.minTraveler&&(c=s.minTraveler,t.adult.data("adult",c),t.adult.text(c),t.adult.siblings("input").val(c),l=c+y+v,t.totalEle.data("total",l),t.totalEle.val(l+" "+f.getLabel(e.lang,"travelers")))));t.element.on("click."+r,"[data-add]",function(i){i.preventDefault();var f=n(this),r=h(f,s);!r.length||t.totalEle.data("total")>=s.maxTraveler||(typeof r.data("adult")!="undefined"&&u(r,"adult",1,t),typeof r.data("child")!="undefined"&&u(r,"child",1),typeof r.data("infant")!="undefined"&&u(r,"infant",1,t),u(t.totalEle,"total",1))});t.element.on("click."+r,"[data-minus]",function(i){i.preventDefault();var f=n(this),r=h(f,s);!r.length||t.totalEle.data("total")<=s.minTraveler||(typeof r.data("adult")!="undefined"&&u(r,"adult",0,t),typeof r.data("child")!="undefined"&&u(r,"child",0),typeof r.data("infant")!="undefined"&&u(r,"infant",0,t),o&&u(t.totalEle,"total",0))})},setAdult:function(n){var t=this,i=t.element.find("[data-adult]");s(i,"adult",n)},setChild:function(n){var t=this,i=t.element.find("[data-child]");s(i,"child",n)},setInfant:function(n){var t=this,i=t.element.find("[data-infant]");s(i,"infant",n)},setTotal:function(n){var i=this,t=i.element.find("[data-total]");t.data("total",n);t.val(n)},destroy:function(){n.removeData(this.element[0],r)}};n.fn[r]=function(t,i){return this.each(function(){var u=n.data(this,r);u?u[t]&&u[t](i):n.data(this,r,new c(this,t))})};n.fn[r].defaults={maxTraveler:20,minTraveler:1,wrapper:!1};n(function(){n("[data-"+r+"]")[r]()})}(jQuery,window),function(n,t,i){"use strict";function d(t,i){this.element=n(t);this.options=n.extend({},n.fn[e].defaults,this.element.data(),i);this.init()}var g=function(n,t){return t>n?!1:!0},r=function(n,t,i){n.errorArea.find("."+t).length||n.errorArea.append('<div class="bg-danger '+t+'">'+i[t]+"<\/div>");n.isValidate=!1;n.element.addClass("validating")},c=function(n,t,i,u,f,e){var s="OneWay";e&&(s="");r(n,"birthday"+f+s,t);o(n,i.eq(u))},nt=function(n,t,i,u){r(n,"invalidDOB",t);o(n,i.eq(u))},o=function(n,t){n.isValidate?t.find(".tab-error").addClass("hidden"):t.find(".tab-error").removeClass("hidden")},l=function(n){var t=this;t[n].show();t.overlay.show()},tt=function(n){var t=n[0],i=n[1];return(Date.parse(i)-Date.parse(t))/6e4>=120?!0:!1},v=function(n){return/^[a-zA-Z]+([- '/][a-zA-Z]+)*$/.test(n.trim())?!1:!0},it=function(n){return n.trim().match(/^[0-9]+$/)?!0:!1},s=function(n,t,i,u,f){t==null||t.length?t!=null&&t.length>1&&v(t.trim())&&(n.addClass("has-error"),r(i,"englishName",u)):(r(i,f,u),n.addClass("has-error"))},h=function(n,t,i,u,f){f=f==="special"?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#?!@$%^&*-])[a-zA-Z\d#?!@$%^&*-]{8,}/:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#?!@$%^&*-])(?!.[\.,])[a-zA-Z\d#?!@$%^&*-]{7,15}[^\.,]$/;t.length?f.test(t)||(n.addClass("has-error"),r(i,"passwordPattern",u)):r(i,"password",u)},a=function(n,t,i,u,f){(n.length||t.length)&&n!==t&&(i.addClass("has-error"),r(u,"confirmPassword",f))},w=function(n){return/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|asia|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i.test(n)},b=function(n,t){var i=n.data("pattern"),r;return i?(r={},r=t?new RegExp(i,t):new RegExp(i),r.test(n.val().trim())):!1},y=function(t,i,r,u){if(!t.val().length){i.removeClass("active");return}t.val().length>16&&t.val(t.val().slice(0,16));var f=!1,e=null;return(t.validateCreditCard(function(o){var s=n("#AllowedCardBinNumbers"),y=n("#card_pairs_data"),c,l,a,h,v;if(c=y.length?JSON.parse(y.html()):[],c.length>0)for(l=0;l<c.length;l++)if(c[l].id==n("#cardAccountNumId").val())return!0;if(s.val().length==0)o.luhn_valid&&o.valid&&o.length_valid||(f=!0),o.card_type?n.each(i,function(t,u){var f=n(u);if(f.data("card-type")==o.card_type.name)return i.removeClass("active"),f.addClass("active"),e=o.card_type.name,r.html(""),!1}):r.html('<div class="bg-danger">'+u.requireCard+"<\/div>");else{for(a=s.val().split(","),h=0;h<a.length;++h)if(a[h].length>0&&t.val().indexOf(a[h])==0)return f=!1,r.html(""),!0;v="cardNotAllowedForCampaign";f=!0;s.data("agent-role")=="WUKZ"&&(v="invalidKFUOBCard");s.attr("data-message").length>0?r.html('<div class="bg-danger">'+s.attr("data-message")+"<\/div>"):r.html('<div class="bg-danger">'+u[v]+"<\/div>")}},{accept:["scbmastercard","visa","mastercard","amex","jcb"]}),f)?(t.addClass("has-error"),t.removeClass("input-success"),!f):(t.removeClass("has-error"),t.addClass("input-success"),e)},p=function(n,t,i){if(n.val().length){t==="amex"&&n.val().length>4&&n.val(n.val().slice(0,4));t!=="amex"&&n.val().length>3&&n.val(n.val().slice(0,3));var r=!1;/[^0-9]/gi.test(n.val().trim())?r=!0:t==="amex"?n.val().trim().length!==4&&(r=!0):n.val().trim().length!==3&&(r=!0);r?(n.addClass("has-error"),n.removeClass("input-success"),i.isValidate=!1):(n.removeClass("has-error"),n.addClass("input-success"))}},k=function(n,t,r){var e=n.element.find("[data-tab-form] .tab-pane.active"),s=e.find(".tab-error-mess"),u=e.find("[data-card-type]"),f=!1,h=n.element.find("[data-card-ccv]"),o=u.filter(".active").length?u.filter(".active").data("card-type"):"";r.attr("data-card-number")!==i&&r.attr("data-card-number")!==!1&&(f=y(r,u,s,t),f&&f.length&&h.val().trim().length&&p(n.element.find("[data-card-ccv]"),o,n));r.attr("data-card-ccv")!==i&&r.attr("data-card-ccv")!==!1&&p(r,o,n)},e="validation",f=t.l10n,u=t.site;u.checkCreditCard=y;d.prototype={init:function(){var t=this,rt=t.options,et=t.element.parsley(rt),d=f.getLabel(u.lang,"validation"),ut=new Date,lt=ut.getDate(),ct=ut.getMonth()+1,ot=ut.getFullYear(),ft,at=!1,vt=!0,yt;if(t.errorArea=t.element.find(".error-mess"),t.travelErr=t.element.find("[data-traveler-error]"),t.errorEle=t.element.find(".validation-error"),t.totalEle=t.element.find("[data-total]"),t.isValidate=!0,t.iconState=!1,t.isValidateTab=!0,t.transitionOverlay=n("[data-transition]"),t.transitionOverlaySelect=n("[data-select-transition]"),t.toggleIdValidation(),t.popupMeal=n("#popup__mealRequired"),t.popupFlightTime=n("#popup__flightTime"),t.overlay=n(".overlayer"),t.resendItineraryForm=n("[data-resend-itinerary]"),t.popupResendItinerary=n("#popup__mail-success"),t.popupTermsAndConditions=n("#popup__termsAndConditions"),t.popupTermsAndConditionsCashPay=n("#popup__termsAndConditionsCashPay"),t.popupAgeCheck=n("#popup__agecheck"),(rt.isAboutYou||rt.isEditPassengerDetail)&&(ut=new Date(rt.flightDate),lt=ut.getDate(),ct=ut.getMonth()+1,ot=ut.getFullYear()),t.element.find("[data-type]").each(function(){var r=n(this),u,f,e,t;switch(r.data("type")){case"infant":var o=r.find("[data-year]"),i=o.val(),s="<option value>YYYY<\/option>";for(u=2;u>=0;u--)t=ot-u,s+='<option value="'+t+'" '+(t.toString()===i?"selected":"")+">"+t+"<\/option>";o.html(s);break;case"child":var h=r.find("[data-year]"),i=h.val(),c="<option value>YYYY<\/option>";for(f=12;f>1;f--)t=ot-f,c+='<option value="'+t+'" '+(t.toString()===i?"selected":"")+">"+t+"<\/option>";h.html(c);break;default:var l=r.find("[data-year]"),i=l.val(),a="<option value>YYYY<\/option>";for(e=100;e>=12;e--)t=ot-e,a+='<option value="'+t+'" '+(t.toString()===i?"selected":"")+">"+t+"<\/option>";l.html(a)}}),rt.isAboutYou&&(d=f.getLabel(u.lang,"aboutYou"),t.showPopupStep=0,ut=new Date(rt.flightDate),lt=ut.getDate(),ct=ut.getMonth()+1,ot=ut.getFullYear(),t.termChecking=t.element.find("[data-check-term]"),t.termChecking.data("agreeTerm",!1),t.disAgreeLink=t.element.find("[data-disagree-link]"),t.aboutYouEle=n("[data-about-you]")),rt.aboutYou&&(t.aboutYouEle=n("[data-about-you]")),rt.isGroupBooking&&(d=f.getLabel(u.lang,"groupBooking")),rt.isCheckIn&&(d=f.getLabel(u.lang,"checkIn")),rt.isCheckInSuccessful&&(d=f.getLabel(u.lang,"checkInSuccessful")),rt.isAgentLogin&&(d=f.getLabel(u.lang,"agentLogin")),rt.isAgentApply&&(d=f.getLabel(u.lang,"agentApply")),rt.isManageBooking&&(d=f.getLabel(u.lang,"manageBooking")),rt.isRegisterAccount&&(d=f.getLabel(u.lang,"registerAccount"),u.updateSelect(t.element.find("[data-type]"),ct,ot)),(rt.isAgentForgetPassword||rt.isForgetPassword)&&(d=f.getLabel(u.lang,"agentForgetPassword")),rt.isEditPassengerDetail&&(d=f.getLabel(u.lang,"editPassengerDetail"),t.element["about-you"](),t.element["about-you"]("selectDate",t.element.find("[data-type]"))),rt.isEditKrisflyerDetail&&(d=f.getLabel(u.lang,"krisflyerMember")),rt.isProfileAccountEditPassword){d=f.getLabel(u.lang,"profileAccount");yt=t.element.find("[data-password-fit]");t.element.find("[data-current-password]").on("change."+e,function(){var t=n(this),i=t.val();i.length&&(t.parents(".form-group").removeClass("has-error"),yt.addClass("hidden"))})}if(rt.isChangeFlight&&(d=f.getLabel(u.lang,"changeFlight")),(rt.isEditTravellerPopup||rt.isNewTravellerPopup)&&(d=f.getLabel(u.lang,"editTravellerPopup"),t.element["about-you"](),t.element["about-you"]("selectDate",t.element.find("[data-type]"))),t.resendItineraryForm.length)t.resendItineraryForm.find("[data-resend-itinerary-btn]").off().on("click."+e,function(){t.resendItineraryForm.data("is-clicked",!0);t.resendItineraryForm.trigger("submit")});et.on("form:validate",function(){var bt,kt,ut,a,ui,ft,st,ht,lt,wt,hi,ci;if(t.errorArea.html(""),t.element.removeClass("validating"),t.totalEle.removeClass("has-error"),t.isValidate=!0,t.element.find(".has-error").removeClass("has-error"),t.element.find(".tab-error").addClass("hidden"),rt.bookingValidate&&(d=f.getLabel(u.lang,"bookingValidation")),bt=t.element.find("[data-adult]").data("adult"),kt=t.element.find("[data-infant]").data("infant"),g(bt,kt)?t.isValidate=!0:(t.errorArea.append('<div class="bg-danger" data-traveler-error>'+d.travaler+"<\/div>"),t.element.addClass("validating"),t.totalEle.addClass("has-error"),t.isValidate=!1),rt.tabValidation){var k=t.element.find("[data-tab-form] .tab-pane.active"),v=k.find("[data-ele-required]"),h=k.find(".tab-error-mess"),c=k.find("[data-card-type]"),w=function(){var f,r,u;c.length&&(f=c.filter(".active").length?c.filter(".active").data("card-type"):"",f.length?(h.html(""),v.each(function(){var r=n(this),u=r[0].tagName.toLowerCase(),e;(u==="input"||u==="select"||u==="textarea")&&r.val()===""?(r.addClass("input-error"),r.removeClass("input-success"),t.isValidate=!1):r.removeClass("input-error").addClass("input-success");r.attr("data-card-number")!==i&&r.attr("data-card-number")!==!1&&(e=y(r,c,h,d),e==!1&&(t.isValidate=e));r.attr("data-card-ccv")!==i&&r.attr("data-card-ccv")!==!1&&p(r,f,t)}),r=t.element.find("[data-exp-month]"),u=t.element.find("[data-exp-year]"),r.val()!=""&&u.val()!=""&&(r.val()<=ct&&u.val()<=ot?(r.addClass("input-error"),u.addClass("input-error"),h.html("<div class='bg-danger'>"+d.creditcardexpiry_error+" <\/div>"),t.isValidate=!1):(r.removeClass("input-error").addClass("input-success"),u.removeClass("input-error").addClass("input-success"),t.isValidate!=!1&&h.html("")))):(v.each(function(){var t=n(this);t.removeClass("input-error has-error")}),h.html('<div class="bg-danger">'+d.requireCard+"<\/div>"),t.isValidate=!1))},dt=t.element.find("[data-t-and-c]"),gt=t.element.find("[data-t-and-c-cashpay]");v.on("input."+e,function(){w()});v.on("focusout."+e,function(){w()});c.on("click",function(n){n.preventDefault();w()});w();dt.length&&!dt.prop("checked")&&l.call(t,"popupTermsAndConditions");gt.length&&!gt.prop("checked")&&n(n(".tab.slick-slide.active").children()[0]).attr("data-method")=="CI"&&(h.html('<div class="bg-danger">'+d.required+"<\/div>"),t.isValidate=!1,l.call(t,"popupTermsAndConditionsCashPay"))}if(rt.isMultiCity){var li=t.element.find("[data-ele-required]"),ni=t.element.find("[data-depart-place-1]").val(),ti=t.element.find("[data-depart-place-2]").val(),ai=t.element.find("[data-arriving-place-1]").val(),vi=t.element.find("[data-arriving-place-2]").val(),ii=t.element.find("[data-depart]"),ri=t.element.find("[data-return]"),yi=ii.datepicker("getDate"),a=ri.datepicker("getDate"),nt=!0;li.each(function(){var t=n(this);t.val()===""?(nt=!1,t.addClass("input-error")):t.removeClass("input-error")});t.isValidate=t.isValidate&&nt;nt||t.errorArea.append('<div class="bg-danger">'+d.required+"<\/div>");yi>a&&(t.errorArea.append('<div class="bg-danger">'+d.departReturn+"<\/div>"),ii.addClass("input-error"),ri.addClass("input-error"),t.isValidate=!1);ni!==""&&ti!==""&&ni!==vi&&ti!==ai&&(t.errorArea.append('<div class="bg-danger">'+d.samePlace+"<\/div>"),t.isValidate=!1)}if(rt.isChangeFlight){var o=t.element.find("[data-depart]"),s=t.element.find("[flight-change-error]").first(),pi=t.element.find("[date-to]").attr("value");s.is(":hidden")||(o.each(function(){n(this).removeClass("input-error")}),s.toggle(),s.text(""));o.length>1&&(ut=new Date(o.first().val()),a=new Date(o.last().val()),ut>a&&(o.first().addClass("input-error"),o.last().addClass("input-error"),s.append(d.invalidDates),s.toggle(),t.isValidate=!1));t.isValidate==!0&&pi.indexOf("HNL")>-1&&(ui=7776e6,a-ut>ui&&(o.first().addClass("input-error"),o.last().addClass("input-error"),s.append(d.maxTravelReturnDate),s.toggle(),t.isValidate=!1))}if(rt.isPayment&&(d=f.getLabel(u.lang,"validation"),ft=t.element.find("[data-contactnumber]"),it(ft.val())||(ft.addClass("has-error"),r(t,"contactNumber",d),t.isValidate=!1),st=t.element.find("[data-gst-contact-checkbox]")[0],st&&st.checked)){var fi=t.element.find("[data-email-address]"),ei=t.element.find("[data-company-name]"),oi=t.element.find("[data-registration-number]"),si=t.element.find("[data-address]");b(fi,"i")||(fi.addClass("has-error"),r(t,"email",d),t.isValidate=!1);ei.val().length<1&&(ei.addClass("has-error"),r(t,"companyName",d),t.isValidate=!1);b(oi)||(oi.addClass("has-error"),r(t,"registrationNumber",d),t.isValidate=!1);si.val().length<1&&(si.addClass("has-error"),r(t,"address",d),t.isValidate=!1)}if(rt.isSelectFlight){if(d=f.getLabel(u.lang,"selectFlight"),ht=t.element.find("[data-btn-find-flights]"),vt=!1,ht.hasClass("hidden")){var at=!0,yt=[],pt=!1;t.element.find("[data-fly-option]").each(function(){var t=n(this),i=t.find(".active").parents(".flight-results__result");t.parents("section").hasClass("booking-flight-disable")?pt=!0:t.data("ischecked")?yt.push(i.data("time")):at=!1});d=f.getLabel(u.lang,"selectFlight");t.element.find(".no-flight").length&&(at=!1);pt||yt.length!==2||tt(yt)||(l.call(t,"popupFlightTime"),t.isValidate=!1);at||(pt?r(t,"selectOne",d):r(t,"required",d),t.isValidate=!1,et.trigger("form:error"))}else lt=!0,t.element.find(".booking-flight").each(function(){n(this).data("isSelected")||(lt=!1)}),lt?(t.isValidate=!1,location.href=location.origin+"/"+ht.attr("href")):(t.isValidate=!1,et.trigger("form:error"));wt=t.element.find("[data-fare-not-guaranteed]");wt.length&&!wt.prop("checked")&&(r(t,"notGuaranteedFare",d),t.isValidate=!1,et.trigger("form:error"))}hi=n("html, body");ci=0;hi.stop().animate({scrollTop:ci},500)});et.on("form:validated",function(){var hi,pr,y,g,hu,wi,bi,ki,di,gi,nr,tr,ir,ot,rr,au,pu,wu,ri,fi,ei;if(rt.isAboutYou){var i=t.element.find("[data-tab-ele].clone").children(),oi=!1,vr=!1,yr=0,si=!1,pf=t.element.find('[data-type="adult"]').length;t.element.find("[data-type]").each(function(){var r=n(this),u=r.parents(".tab-pane").index(),f=t.options.flightDate!=t.options.returnFlightDate,ft,et,rt;switch(r.data("type")){case"infant":var s=r.find("[data-date]"),h=r.find("[data-month]"),vt=r.find("[data-year]"),l=s.val(),a=h.val(),v=vt.val(),st=new Date(t.options.flightDate),ht=new Date(t.options.returnFlightDate),yt=new Date(t.options.flightDate).getDate(),ut=new Date(t.options.returnFlightDate).getFullYear();st.setDate(yt-8);ht.setYear(ut-2);l.length&&a.length&&v.length?(l=parseInt(l),a=parseInt(a),v=parseInt(v),ft=new Date(v,a-1,l),ft>ht&&ft<=st?(s.removeClass("has-error"),h.removeClass("has-error")):(c(t,d,i,u,"Infant",f),s.addClass("has-error"),h.addClass("has-error"))):(c(t,d,i,u,"Infant",f),s.addClass("has-error"),h.addClass("has-error"));break;case"child":var y=r.find("[data-date]"),p=r.find("[data-month]"),pt=r.find("[data-year]"),w=y.val(),b=p.val(),k=pt.val(),ct=new Date(t.options.flightDate),lt=new Date(t.options.returnFlightDate),g=new Date(t.options.flightDate).getFullYear(),ut=new Date(t.options.returnFlightDate).getFullYear();ct.setYear(g-2);lt.setYear(ut-12);w.length&&b.length&&k.length?(w=parseInt(w),b=parseInt(b),k=parseInt(k),et=new Date(k,b-1,w),et>lt&&et<=ct?(y.removeClass("has-error"),p.removeClass("has-error")):(c(t,d,i,u,"Child",f),y.addClass("has-error"),p.addClass("has-error"))):(c(t,d,i,u,"Child",f),y.addClass("has-error"),p.addClass("has-error"));break;default:var e=r.find("[data-date]"),o=r.find("[data-month]"),wt=r.find("[data-year]"),nt=e.val(),tt=o.val(),it=wt.val(),ot=new Date(t.options.flightDate),at=new Date(t.options.flightDate),g=new Date(t.options.flightDate).getFullYear();ot.setYear(g-12);at.setYear(g-18);nt.length&&tt.length&&it.length?(nt=parseInt(nt),tt=parseInt(tt),it=parseInt(it),rt=new Date(it,tt-1,nt),rt<=ot&&rt>at?(e.addClass("has-error"),o.addClass("has-error"),si=!0,yr=u):rt<=ot?(e.removeClass("has-error"),o.removeClass("has-error"),oi=!0):(c(t,d,i,u,"Adult",f),e.addClass("has-error"),o.addClass("has-error"),vr=!0),oi&&pf-1==u&&!vr&&(t.element.find('[data-type="adult"]').each(function(){n(this).find("[data-date]").removeClass("has-error");n(this).find("[data-month]").removeClass("has-error")}),si=!1)):(c(t,d,i,u,"Adult",f),e.addClass("has-error"),o.addClass("has-error"))}});oi===!1&si===!0&&(nt(t,d,i,yr),l.call(t,"popupAgeCheck"),t.isValidate=!1);ft=t.isValidate;t.isValidate=!0;hi=t.element.find("[data-acc-ele] input[data-meals-input]").parent().filter(".parsley-error");hi.length?(l.call(t,"popupMeal"),t.isValidate=!1,hi.each(function(){var r=n(this).parents(".tab-pane:last").index();o(t,i.eq(r))})):t.isValidate=ft;ft=t.isValidate;t.isValidate=!0;ot=t.element.find("input[data-insurance-input]").parent().filter(".parsley-error");ot.length?r(t,"insuranceRequiredSelection",d):t.isValidate=ft;ft=t.isValidate;t.isValidate=!0;pr=t.element.find("input[data-visa-input]").parent().filter(".parsley-error");pr.length?r(t,"eVisaSelectionRequired",d):t.isValidate=ft;ft=t.isValidate;t.isValidate=!0;var ci=t.element.find("[data-first-name]"),wr=t.element.find("[data-last-name]"),br=t.element.find("[data-title]"),kr=t.element.find("[data-nationality]"),dr=ci.length,li=!1,ni=!1,ti=!1,ai=!1,vi=!1,yi=!1;for(y=0;y<dr;y++){var gr=br.eq(y),nu=gr.val(),tu=ci.eq(y),st=tu.val(),iu=wr.eq(y),ht=iu.val(),ru=kr.eq(y),wf=ru.val();for(li=!1,ni=!1,ti=!1,ai=!1,vi=!1,yi=!1,nu.length||(t.isValidate=!1,li||(li=!0,o(t,i.eq(y)),gr.addClass("has-error"),r(t,"titleName",d))),kr.hasClass("required-input")&&!wf.length&&(t.isValidate=!1,yi||(yi=!0,o(t,i.eq(y)),ru.addClass("has-error"),r(t,"nationality",d))),st.length||ni?st.length>1&&!ai&&v(st)&&(ai=!0,tu.addClass("has-error"),o(t,i.eq(y)),r(t,"englishName",d)):ni||(ni=!0,o(t,i.eq(y)),r(t,"fname",d)),ht.length||ti?ht.length>1&&!vi&&v(ht)&&(vi=!0,iu.addClass("has-error"),o(t,i.eq(y)),r(t,"englishName",d)):ti||(ti=!0,o(t,i.eq(y)),r(t,"lname",d)),g=y+1;g<dr;g++){var pi=br.eq(g),uu=pi.val(),fu=ci.eq(g),eu=fu.val(),ou=wr.eq(g),su=ou.val();nu===uu&&uu.length&&st===eu&&st.length&&eu.length&&ht===su&&ht.length&&su.length&&(hu=pi.parents(".tab-pane:last").index(),t.isValidate=!1,o(t,i.eq(hu)),r(t,"name",d),pi.addClass("has-error"),fu.addClass("has-error"),ou.addClass("has-error"))}}wi=t.element.find("[data-country-of-birth]");wi.length&&wi.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"countryOfBirth",d));ft&&t.isValidate||r(t,"required",d);bi=t.element.find("[data-nationality]");bi.length&&bi.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"nationality",d));ki=t.element.find("[data-passport-number]");ki.length&&ki.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"passportNumber",d));di=t.element.find("[data-passport-month]");di.length&&di.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"passportMonth",d));gi=t.element.find("[data-passport-year]");gi.length&&gi.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"passportYear",d));nr=t.element.find("[data-krisflyer]");nr.length&&nr.hasClass("parsley-error")&&(t.isValidate=!1,o(t,i.eq(n(this).parents(".tab-pane:last").index())),r(t,"krisflyer",d));ft&&t.isValidate||r(t,"required",d);t.isIdValidationEnabled&&t.validateInsurance(et)}if(rt.isEditKrisflyerDetail&&(tr=t.element.find("[data-memberf]"),ir=t.element.find("[data-memberl]"),s(tr,tr.val(),t,d,"fname"),s(ir,ir.val(),t,d,"lname"),t.element.find("input").each(function(){var i=n(this);i.hasClass("parsley-error")&&(t.isValidate=!1)})),rt.aboutYou&&(ot=t.element.find("input[data-insurance-input]").parent().filter(".parsley-error"),ot.length&&(t.element.find(".error-mess").html(""),d=f.getLabel(u.lang,"aboutYou"),r(t,"insuranceRequiredSelection",d))),rt.isGroupBooking){var cu=t.element.find("[data-first-name]"),lu=t.element.find("[data-last-name]"),io=t.element.find("[data-email]"),bf=cu.val(),kf=lu.val();s(cu,bf,t,d,"fname");s(lu,kf,t,d,"lname");rr=t.element.find("[data-state],[data-country],[data-agent-login-id], [data-agent-status], [data-office-number], [data-mobile-number], [data-email], [data-address1], [data-city], [data-country], [data-postal-code]");rr.filter(".parsley-error").each(function(){var i=n(this);i.val().length||(i.attr("data-agent-login-id")?r(t,"agentLoginID",d):i.attr("data-agent-status")?r(t,"agentStatus",d):i.attr("data-office-number")?r(t,"officeNumber",d):i.attr("data-mobile-number")?r(t,"mobileNumber",d):i.attr("data-email")?r(t,"email",d):i.attr("data-state")?r(t,"state",d):i.attr("data-country")?r(t,"country",d):i.attr("data-title")&&r(t,"country",d))});t.element.find("[data-same-organization]").is(":checked")||rr.filter(":not(.parsley-error)").each(function(){var i=n(this);i.val().length||(i.attr("data-address1")?r(t,"address",d):i.attr("data-city")?r(t,"city",d):i.attr("data-country")?r(t,"country",d):i.attr("data-postal-code")&&r(t,"postalCode",d),i.addClass("has-error"))});var ur=t.element.find("[data-password]"),ii=t.element.find("[data-repassword]"),ct=ur.val(),lt=ii.val();!ct.length&&ur.data("parsley-required")?r(t,"password",d):ct.length>1&&(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#?!@$%^&*-])[a-zA-Z\d#?!@$%^&*-]{8,}/.test(ct)||(ur.addClass("has-error"),r(t,"passwordPattern",d)));!lt.length&&ii.data("parsley-required")?r(t,"password",d):lt.length>1&&(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#?!@$%^&*-])[a-zA-Z\d#?!@$%^&*-]{8,}/.test(lt)||(ii.addClass("has-error"),r(t,"passwordPattern",d)));(ct.length||lt.length)&&ct!==lt&&(ii.addClass("has-error"),r(t,"confirmPassword",d))}if(au=t.element.find("[data-krisflyer-validation]"),n(au).each(function(){var i=n(this).val(),u=parseInt(i.substr(0,9)),f=u%7+3,e=parseInt(i.substr(9,1));i.length&&(i.length!==10||f!==e)&&(n(this).addClass("has-error"),r(t,"krisflyer",d))}),rt.isCheckIn){var df=t.element.find("[data-booking-reference]"),vu=t.element.find("[data-last-name]"),gf=vu.val(),tt=t.element.find("[data-departing]");df.hasClass("parsley-error")&&r(t,"bookingReference",d);s(vu,gf,t,d,"lname");tt.hasClass("parsley-error")||tt.hasClass("has-error-selection")?(tt.removeClass("parsley-success"),tt.addClass("has-error"),r(t,"departing",d)):tt.prev().val(tt.attr("data-city-code"))}if(rt.isCheckInSuccessful){var ne=t.element.find("[data-check-in-email]"),yu=t.element.find("[data-check-in-reemail]"),te=yu.val();ne.hasClass("parsley-error")&&r(t,"email",d);yu.hasClass("parsley-error")&&(te.length?r(t,"equalEmail",d):r(t,"confirmEmail",d))}if(rt.isAgentLogin&&(pu=t.element.find("[data-email]"),wu=t.element.find("[data-password]"),pu.hasClass("parsley-error")&&(t.isValidate=!1,r(t,"email",d)),wu.hasClass("parsley-error")&&(t.isValidate=!1,r(t,"password",d))),rt.isAgentApply||rt.isRegisterAccount){var ie=t.element.find("[data-organisation-name]"),bu=t.element.find("[data-iata-number]"),re=bu.val(),ku=t.element.find("[data-address]"),ue=t.element.find("[data-language]"),fe=t.element.find("[data-country]"),at=t.element.find("[data-city]"),ee=t.element.find("[data-postal-code]"),fr=t.element.find("[data-title]"),vt=t.element.find("[data-first-name]"),er=vt.val(),yt=t.element.find("[data-last-name]"),or=yt.val(),oe=t.element.find("[data-office-number]"),se=t.element.find("[data-mobile-number]"),he=t.element.find("[data-email]"),du=t.element.find("[data-reemail]"),ce=du.val(),pt=t.element.find("[data-password]"),b=t.element.find("[data-repassword]"),wt=pt.val(),bt=b.val(),sr=t.element.find("[data-agree-term]");if(ie.hasClass("parsley-error")&&r(t,"organizationName",d),bu.hasClass("parsley-error")&&(re.length?r(t,"iataPattern",d):r(t,"iata",d)),ku.hasClass("parsley-error")&&r(t,"address",d),ue.hasClass("parsley-error")&&r(t,"language",d),fe.hasClass("parsley-error")&&r(t,"country",d),at.hasClass("parsley-error")&&r(t,"city",d),ee.hasClass("parsley-error")&&r(t,"postalCode",d),fr.hasClass("parsley-error")&&r(t,"titleName",d),s(vt,er,t,d,"fname"),s(yt,or,t,d,"lname"),oe.hasClass("parsley-error")&&r(t,"officeNumber",d),se.hasClass("parsley-error")&&r(t,"mobileNumber",d),he.hasClass("parsley-error")&&r(t,"email",d),du.hasClass("parsley-error")&&(ce.length?r(t,"equalEmail",d):r(t,"confirmEmail",d)),h(pt,wt,t,d),h(b,bt,t,d),a(wt,bt,b,t,d),sr.parent().hasClass("parsley-error")&&r(t,"agreeTerms",d),rt.isRegisterAccount){var hr=t.element.find("[data-date], [data-month], [data-year]"),le=t.element.find("[data-passport-number]"),ae=t.element.find("[data-passport-month]"),ve=t.element.find("[data-passport-year]"),gu=t.element.find("[data-card-type]"),ro=gu.find(".active"),ye=t.element.find("[data-card-number]"),pe=t.element.find("[data-expiry-card-month]"),we=t.element.find("[data-expiry-card-year]"),be=t.element.find("[data-card-holder-name]");hr.filter(".parsley-error").length&&r(t,"birthday",d);le.hasClass("parsley-error")&&r(t,"passportNumber",d);ae.hasClass("parsley-error")&&r(t,"passportMonth",d);ve.hasClass("parsley-error")&&r(t,"passportYear",d);gu.hasClass("parsley-error")&&r(t,"cardType",d);ye.hasClass("parsley-error")&&r(t,"cardNumber",d);pe.hasClass("parsley-error")&&r(t,"dataExpiryCardMonth",d);we.hasClass("parsley-error")&&r(t,"dataExpiryCardYear",d);be.hasClass("parsley-error")&&r(t,"cardholderName",d)}}if(rt.isMemberRegistration){var fr=t.element.find("[data-title]"),vt=t.element.find("[data-first-name]"),er=vt.val(),yt=t.element.find("[data-last-name]"),or=yt.val(),pt=t.element.find("[data-password]"),b=t.element.find("[data-repassword]"),wt=pt.val(),bt=b.val(),sr=t.element.find("[data-agree-term]"),hr=t.element.find("[data-date], [data-month], [data-year]"),p=f.getLabel(u.lang,"registerAccount"),nf=t.element.find("[data-address1]"),at=t.element.find("[data-city]"),cr=t.element.find("[data-postal-code]");fr.hasClass("parsley-error")&&r(t,"titleName",p);s(vt,er,t,p,"fname");s(yt,or,t,p,"lname");h(pt,wt,t,p);h(b,bt,t,p);a(wt,bt,b,t,p);(nf.val()||at.val()||cr.val())&&(nf.val()==""&&(ku.addClass("parsley-error"),ri=!0),at.val()==""&&(at.addClass("parsley-error"),ri=!0),cr.val()==""&&(cr.addClass("parsley-error"),ri=!0),ri&&(r(t,"completeAddress",p),t.isValidate=!1));sr.parent().hasClass("parsley-error")&&r(t,"agreeTerms",p);hr.filter(".parsley-error").length&&r(t,"birthday",p)}if(rt.isManageBooking){var ke=t.element.find("[data-booking-reference]"),kt=t.element.find("[data-email-address]"),it=t.element.find("[data-passenger-fn]"),ut=t.element.find("[data-passenger-ln]"),dt=t.element.find("[data-origin-city]"),gt=t.element.find("[data-destination-city]"),tf=!0,ui=!0,k=!0;ke.hasClass("parsley-error")&&(tf=ui=k=!1);w(kt.val())?kt.addClass("parsley-success"):(kt.addClass("has-error"),r(t,"email",d),ui=!1);s(it,it.val(),t,d,"fname");it.hasClass("has-error")?k=!1:it.addClass("parsley-success");s(ut,ut.val(),t,d,"lname");ut.hasClass("has-error")?k=!1:ut.addClass("parsley-success");dt.val().length?dt.addClass("parsley-success"):(dt.addClass("has-error"),r(t,"originCity",d),k=!1);gt.val().length?gt.addClass("parsley-success"):(gt.addClass("has-error"),r(t,"destinationCity",d),k=!1);t.errorArea.find(".bg-danger").addClass("hidden");tf||r(t,"bookingReference",d);ui||k?(ui?t.element.find(".col-left").find(".form-control").removeClass("remove-error"):(kt.val(""),t.element.find(".col-left").find(".form-control").addClass("remove-error")),k?t.element.find(".col-right").find(".form-control").removeClass("remove-error"):(it.val(""),ut.val(""),dt.val(""),gt.val(""),t.element.find(".col-right").find(".form-control").addClass("remove-error")),t.isValidate=!0):(fi=!1,ei=!1,kt.val().length&&(fi=!0),(it.val().length||ut.val().length||dt.val().length||gt.val().length)&&(ei=!0),fi&&!ei?(t.element.find(".col-left").find(".form-control").removeClass("remove-error"),t.element.find(".col-right").find(".form-control").addClass("remove-error"),t.errorArea.find(".email").removeClass("hidden")):!fi&&ei?(t.element.find(".col-left").find(".form-control").addClass("remove-error"),t.element.find(".col-right").find(".form-control").removeClass("remove-error"),t.errorArea.find(".fname").removeClass("hidden"),t.errorArea.find(".lname").removeClass("hidden"),t.errorArea.find(".originCity").removeClass("hidden"),t.errorArea.find(".destinationCity").removeClass("hidden")):(t.element.find(".has-error").addClass("remove-error"),r(t,"fillOne",d)))}if(ft===!1&&(t.isValidate=!1),rt.isAgentForgetPassword||rt.isForgetPassword){var rf=t.element.find("[data-password]"),uf=rf.val(),lr=t.element.find("[data-repassword]"),ff=lr.val();h(rf,uf,t,d);h(lr,ff,t,d);a(uf,ff,lr,t,d)}if(rt.isEditPassengerDetail){var ef=t.element.find("[data-passenger-fn]"),of=t.element.find("[data-passenger-ln]"),de=ef.val(),ge=of.val();s(ef,de,t,d,"fname");s(of,ge,t,d,"lname");t.birthdayValidation(d,"EditPassengerDetails")}if(rt.isProfileAccountEditPassword){var sf=t.element.find("[data-current-password]"),hf=sf.val(),cf=t.element.find("[data-password]"),lf=cf.val(),ar=t.element.find("[data-repassword]"),af=ar.val();hf.length||r(t,"requireCurrentPassword",d);h(sf,hf,t,d);h(cf,lf,t,d);h(ar,af,t,d);a(lf,af,ar,t,d)}if(rt.isEditTravellerPopup||rt.isNewTravellerPopup){var vf=t.element.find("[data-passenger-fn]"),yf=t.element.find("[data-passenger-ln]"),no=vf.val(),to=yf.val();s(vf,no,t,d,"fname");s(yf,to,t,d,"lname");t.birthdayValidation(d)}t.element.find(".has-error").removeClass("parsley-success").off("change."+e).on("change."+e,function(){n(this).removeClass("has-error")})});et.on("form:error",function(){vt&&r(t,"required",d);t.iconState||(t.element.find(".input").each(function(){n(this).append('<span class="validate-icon"><\/span>')}),t.iconState=!0)});et.on("form:submit",function(){return rt.isAboutYou&&t.isValidate&&!t.element.data("insuranceTerms")?(t.aboutYouEle["about-you"]("activePopup","jpInsurance"),!1):rt.aboutYou&&t.isValidate&&!n("form[data-about-you]").data("insuranceTerms")?(t.aboutYouEle["about-you"]("activePopup","jpInsurance"),!1):t.isValidate?t.resendItineraryForm.length&&t.resendItineraryForm.data("is-clicked")?(l.call(t,"popupResendItinerary"),t.resendItineraryForm.data("is-clicked",!1),rt.isShowOverlay=!1,t.element.trigger("showOverlay."+e),!1):rt.isShowOverlay&&!at?(rt.selectFlight?t.transitionOverlaySelect.removeClass("hidden"):t.transitionOverlay.removeClass("hidden"),at=!0,t.element.trigger("showOverlay."+e),!1):(t.element.trigger("submitCallback"),t.isValidate):!1});if(rt.isPayment||rt.isPaymentMmb||rt.isPaymentWci){n("[data-prevent-copypaste]").bind("copy paste",function(n){n.preventDefault()});var st=t.element.find("[data-exp-month]"),ht=t.element.find("[data-exp-year]"),pt=t.element.find("#credit-card-tab").find(".tab-error-mess");n("[data-exp-year], [data-exp-month]").on("change",function(){st.val()!=""&&ht.val()!=""&&(st.val()<=ct&&ht.val()<=ot?(st.addClass("has-error"),ht.addClass("has-error"),pt.html("<div class='bg-danger'>"+d.creditcardexpiry_error+"<\/div>")):(st.hasClass("has-error")&&st.removeClass("has-error"),ht.hasClass("has-error")&&ht.removeClass("has-error"),ht.addClass("input-success"),st.addClass("input-success"),pt.html("")))})}t.element.find("[data-card-number], [data-card-ccv]").on("keydown",function(t){var i=t.keyCode;t.ctrlKey===!0||n.inArray(i,[8,9,13,27,46,110,190])!==-1||i>=35&&i<=39||(t.shiftKey||i<48||i>57)&&(i<96||i>105)&&t.preventDefault()}).on("keyup",function(){k(t,d,n(this))});t.element.find("[data-tab-form] .tab-pane.active").on("click","[data-card-type]",function(n){n.preventDefault();k(t,d,t.element.find("[data-card-number]"))});t.element.on("showOverlay."+e,function(){setTimeout(function(){t.element.trigger("submit")},1500)});this.element.find("[data-insurance-validation] input[type=radio]").on("change",this.toggleIdValidation.bind(this))},validateCreditCard:function(n){var t;return t=_.findKey({electron:/^(4026|417500|4405|4508|4844|4913|4917)\d{10,12}$/,visa:/^4\d{15}$/,mastercard:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/,amex:/^3[47]\d{13}$/,jcb:/^((3088|3096|3112|3158|3337)|(352[89]|35[3-8][0-9]))\d{0,12}$/},function(t){return t.test(n)}),t=t==="electron"?!1:t,!!t},findCreditCardProvider:function(n){var t;return t=_.findKey({electron:/^(4026|417500|4405|4508|4844|4913|4917)\d{0,12}$/,visa:/^4\d{3,15}$/,mastercard:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/,amex:/^3[47]\d{0,13}$/,jcb:/^((3088|3096|3112|3158|3337)|(352[89]|35[3-8][0-9]))\d{0,12}$/},function(t){return t.test(n)}),t==="electron"?!1:t},toggleIdValidation:function(){this.isIdValidationEnabled=!1;var n=this.getContainer();n!==!1&&(this.isIdValidationEnabled=!0)},validateInsurance:function(){var a=this.getContainer(),s,i,h,t,c=[],e=f.getLabel(u.lang,"aboutYou"),l,o;s=a.find(".addon-box input[type=text]:visible");n.each(s,function(u,f){i=n(f).attr("data-id-type");t=n(f).val().trim();t&&c.push({input:n(f),type:i,value:t});h=this.validateIdNumber(t,i);h===!1&&(t?r(this,"invalidId",e):r(this,"required",e),n(f).addClass("parsley-error"))}.bind(this));l=_.groupBy(c,"value");o=_.flatten(_.filter(l,function(n){return n.length>1}));_.each(o,function(n){n.value&&n.input.addClass("parsley-error")});o.length>0&&r(this,"duplicateId",e)},validateIdNumber:function(n,t){return n?t==="twn"?this.validateTwnId(n):t==="chi"?this.validateChiId(n):!0:!1},validateTwnId:function(n){var f=[1,9,8,7,6,5,4,3,2,1],e={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33}[n.slice(0,1)],o=n.slice(1),s=e+o,i=s.split(""),h=i.length,r=0,u,t;if(!/^[A-Z]{1}[0-9]{9}$/.test(n))return!1;for(t=0;t<h-1;t++)r+=parseInt(i[t],10)*f[t];return r+=parseInt(i[10],10),u=r%10,!u},validateChiId:function(){return!0;var n},getContainer:function(){var t=this.element,n=t.find("[data-insurance-validation]"),i=n.find("[data-option-no]").prop("checked");return i?!1:n},birthdayValidation:function(t,i){var u=this,h=u.isAboutYou||!1,s=n('[data-form-name="'+i+'"]').find("[data-type]"),f=!1,o=!1,e=!1;s.each(function(){var i=n(this),s="OneWay",et,ot,ut;u.options.flightDate!=u.options.returnFlightDate&&(s="");switch(i.data("type")){case"infant":var l=i.find("[data-date]"),a=i.find("[data-month]"),yt=i.find("[data-year]"),v=l.val(),y=a.val(),p=yt.val(),ht=new Date(u.options.flightDate),ct=new Date(u.options.returnFlightDate),pt=new Date(u.options.flightDate).getDate(),ft=new Date(u.options.returnFlightDate).getFullYear();ht.setDate(pt-8);ct.setYear(ft-2);v.length&&y.length&&p.length?(v=parseInt(v),y=parseInt(y),p=parseInt(p),et=new Date(p,y-1,v),et>ct&&et<=ht?(l.removeClass("has-error"),a.removeClass("has-error")):(r(u,"birthdayInfant"+s,t),l.addClass("has-error"),a.addClass("has-error"))):(r(u,"birthdayInfant"+s,t),l.addClass("has-error"),a.addClass("has-error"));break;case"child":var w=i.find("[data-date]"),b=i.find("[data-month]"),wt=i.find("[data-year]"),k=w.val(),d=b.val(),g=wt.val(),lt=new Date(u.options.flightDate),at=new Date(u.options.returnFlightDate),nt=new Date(u.options.flightDate).getFullYear(),ft=new Date(u.options.returnFlightDate).getFullYear();lt.setYear(nt-2);at.setYear(ft-12);k.length&&d.length&&g.length?(k=parseInt(k),d=parseInt(d),g=parseInt(g),ot=new Date(g,d-1,k),ot>at&&ot<=lt?(w.removeClass("has-error"),b.removeClass("has-error")):(r(u,"birthdayChild"+s,t),w.addClass("has-error"),b.addClass("has-error"))):(r(u,"birthdayChild"+s,t),w.addClass("has-error"),b.addClass("has-error"));break;default:var h=i.find("[data-date]"),c=i.find("[data-month]"),bt=i.find("[data-year]"),tt=h.val(),it=c.val(),rt=bt.val(),st=new Date(u.options.flightDate),vt=new Date(u.options.flightDate),nt=new Date(u.options.flightDate).getFullYear();st.setYear(nt-12);vt.setYear(nt-18);tt.length&&it.length&&rt.length?(tt=parseInt(tt),it=parseInt(it),rt=parseInt(rt),ut=new Date(rt,it-1,tt),ut<=st&&ut>vt?(h.addClass("has-error"),c.addClass("has-error"),e=!0):ut<=st?(h.removeClass("has-error"),c.removeClass("has-error"),f=!0):(r(u,"birthdayAdult"+s,t),h.addClass("has-error"),c.addClass("has-error"),o=!0),f&&!o&&(u.element.find('[data-type="adult"]').each(function(){n(this).find("[data-date]").removeClass("has-error");n(this).find("[data-month]").removeClass("has-error")}),e=!1)):(r(u,"birthdayAdult"+s,t),h.addClass("has-error"),c.addClass("has-error"))}});f===!1&&e===!0&&r(u,"birthdayAdultMustBe18",t)},emailValidation:function(n){w(n.val())?n.data("is-valid",!0):n.data("is-valid",!1)},destroy:function(){n.removeData(this.element[0],e)}};n.fn[e]=function(t,i){return this.each(function(){var r=n.data(this,e);r?r[t]&&r[t](i):n.data(this,e,new d(this,t))})};n.fn[e].defaults={isShowOverlay:!0};n(function(){n("[data-"+e+"]")[e]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.regexp={};this.cardTypes=["visa","mastercard","amex","jcb","scbmastercard"];this.init()}var t="credit-card";i.prototype={init:function(){var i,t;this.element.on("keyup",this.count.bind(this));for(i=0;i<this.cardTypes.length;i++)t=this.cardTypes[i],n("[data-credit-card-types]").find("[data-card-type="+t+"]").length>0&&(t=="visa"?n.extend(this.regexp,{visa:/^4\d{3,15}$/}):t=="mastercard"?n.extend(this.regexp,{mastercard:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/}):t=="scbmastercard"?n.extend(this.regexp,{scbmastercard:/^(514916114|514916115|540275523)\d{0,7}$/}):t=="amex"?n.extend(this.regexp,{amex:/^3[47]\d{0,13}$/}):t=="jcb"&&n.extend(this.regexp,{jcb:/^((3088|3096|3112|3158|3337)|(352[89]|35[3-8][0-9]))\d{0,12}$/}))},count:function(){var n=this.element.val().trim().replace(/ /g,""),t=n.length;this.verify(n,t)},findCreditCardProvider:function(n){var t;return t=_.findKey(this.regexp,function(t){return t.test(n)}),t==="electron"?!1:t},verify:function(t,i){var f=this.findCreditCardProvider(t),r=n("[data-credit-card-types]"),e=r.find(".btn"),u;(e.removeClass("active"),r.attr("data-disabled",!1),!f||i<4)||(u=r.find("[data-card-type="+f+"]"),u.length<1)||(r.attr("data-disabled",!0),u.addClass("active"))},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="zip-code";i.prototype={init:function(){var t=this,r=n("#zip_data"),i;t.json=r.length?JSON.parse(r.html()):[];i=n("body").find(t.element.attr("data-zip-target"));i.on("change",function(){t.currentVal=i.find(":selected").val();t.element.find("option").remove();t.element.append(n("<option><\/option>").attr("value","").text("Please select"));for(var r=0;r<t.json.length;r++)t.json[r].CountryCode===t.currentVal&&t.element.append(n("<option><\/option>").attr("value",t.json[r].Code).text(t.json[r].Name));n(".japanInsuranceText").length>0&&(t.currentVal!="JP"?n(".japanInsuranceText").show():n(".japanInsuranceText").hide())})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="gst-contact-slider-input";i.prototype={init:function(){var i=this;i.element.on("click."+t,"[data-gst-contact-checkbox]",function(){var t=n(this),r;t.parents("#gst-contact").find("[data-gst-contact-input]").slideToggle();t.is(":checked")?n("[data-registration-number]").blur():(r=i.element.find("[data-email-address]"),r.val(""),n.ajax({url:t.data("gst-url"),data:null,type:"POST",success:i.successCallBack}))});n("[data-registration-number]").on("blur."+t,function(){var t=n(this),r,u,f;t.val()&&(r=t.data("pattern"),u=new RegExp(r),u.test(t.val())?(t.removeClass("has-error"),f={"contactAction.RegistrationNumber":t.val()},n.ajax({url:t.data("gst-url"),data:f,type:"POST",success:i.successCallBack})):t.addClass("has-error"))})},successCallBack:function(){site.refreshBookingSummary()},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window);ScootBook={init:function(){var n=this,t;$("input[data-marketkey-radio]").on("click",function(){n.Changed();n.BookingSummaryAjax()});$("select[data-choose-new-currency]").on("change",function(){n.ChooseNewCurrency(this)});$("input[id*='CreditCardNumber']").on("keyup",function(t){n.CheckCreditType(this,t)});$("input[id*='CreditCardNumber']").on("blur",function(){n.CheckDccOffer(this)});$("[data-name='bookflexibility-ssr'] button[data-ssr-btn-active]").on("click",function(){$("div.dcc_currency").hide()});$("[data-voucher-retrieve]").on("click",function(){n.GetVoucherInfo(this)});$("[data-voucher-apply]").on("click",function(){n.ApplyVoucher(this);n.Changed();n.BookingSummaryAjax()});$("form#SeatMapInput").on("submit",function(){$("span.seat-number.seat-number--selected").each(function(){var t=$(this).parent().find("input:hidden"),n=$(this).html(),i;n.length>0&&(i=$("div.seat-pos").find("a[title="+n+"] div.seat").data("sttype"),n+="|"+i);$(t).val($(t).data("value")+n)})});$("[data-remove-selected-seat]").click(function(){n.RemoveAllSeats()});$("[data-next-flight]").mousedown(function(){return n.SeatFlightSelect($(this).data("mapkey")),!0});$("#copyToAllPax").on("click",function(){$(this).is(":checked")?($($('[id*="PassengerAddress_LineOne"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_LineOne"]').val())}),$($('[id*="PassengerAddress_LineTwo"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_LineTwo"]').val())}),$($('[id*="PassengerAddress_LineThree"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_LineThree"]').val())}),$($('[id*="PassengerAddress_City"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_City"]').val())}),$($('[id*="PassengerAddress_ProvinceState"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_ProvinceState"]').val())}),$($('[id*="PassengerAddress_PostalCode"]')).each(function(){$(this).val($('[id*="0__PassengerAddress_PostalCode"]').val())})):($($('[id*="PassengerAddress_LineOne"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_LineOne")===-1&&$(this).val("")}),$($('[id*="PassengerAddress_LineTwo"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_LineTwo")===-1&&$(this).val("")}),$($('[id*="PassengerAddress_LineThree"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_LineThree")===-1&&$(this).val("")}),$($('[id*="PassengerAddress_City"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_City")===-1&&$(this).val("")}),$($('[id*="PassengerAddress_ProvinceState"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_ProvinceState")===-1&&$(this).val("")}),$($('[id*="PassengerAddress_PostalCode"]')).each(function(){$(this).attr("id").indexOf("0__PassengerAddress_PostalCode")===-1&&$(this).val("")}))});n.initData();n.AddPromoCodeEvent();t="";$(".btn--booking").click(function(){var i=$(".form-booking"),r;t.length==0&&(t=i.attr("action"));n.isNotScootMarket()&&(r=$("#alt_submit_url").val(),r?i.attr("action",r):i.attr("action",t))});$("#SendEmailBP").click(function(){n.SendBoardingPass()});$(".onewayAjaxCall").on("click",function(){var n={},t=$("[data-oneway-ajax]"),i=t.datepicker("getDate"),r=t.data("url");n.returnSearchDate=i==null?"defaultSearch":$.datepicker.formatDate("dd/mm/yy",i);$.ajax({url:r,type:"GET",data:n,success:function(n,t){t=="success"&&($(".ajaxContent").append($(n).html()),$("[data-fly-option]")["fly-option"](),$("[data-select-transition]").addClass("hidden"),$('[data-trigger="hover"]').popover({html:!0}),$("[data-same-height]")["same-height"](),$("[data-slick-slider]")["slick-slider"](),$(".triggerOneWayAjax").addClass("hidden"))}})})},initData:function(){var n=this;n.PageChanged=!1;n.ApiUrl=$("#ScootCommonInit").data("apiurl")},AddPromoCodeEvent:function(){var n=$("[data-promo-code]");n.length&&n.each(function(){var t=$(this),n=t.find("[data-promo-input]"),i=t.find("[data-dummy-input]"),r=t.find("[data-apply-promo]");r.on("click",function(){n.val(i.val())});n.length&&n.val()&&i.val(n.val())})},CheckIfCalendar:function(){var n=$("input[name='showCalendar']");n.length&&n.val().toLowerCase()==="true"&&$("[data-show-toggle] [data-toglle-btn]").get(0).click()},Changed:function(){var n=this;n.PageChanged=!0},BookingSummaryAjax:function(){var n=this,t,i,r;n.PageChanged&&(n.PageChanged=!1,t={},i=0,$("input[data-marketkey-radio]:checked").each(function(){t["revBookingSummary.MarketSellKeys["+i.toString()+"]"]=$(this).val();i++}),r=n.ApiUrl+"/Summary",$.ajax({url:r,dataType:"text",data:t,type:"POST",success:function(t,i){i==="success"&&n.RefreshBookingSummary(t)},error:function(){n.Changed()}}))},SeatSelectAjax:function(){var t=this,n={},i;n["revSeatMapInput.SelectedSeats"]="";$(".seat-flights-nav input[type=hidden]").each(function(t){var u=$(this).parent().find("span"),i,r;n["revSeatMapInput.SelectedSeats"]+=t>0?",":"";i=$(u).html();i.length>0&&(r=$("div.seat-pos").find("a[title="+i+"] div.seat").data("sttype"),i+="|"+r);n["revSeatMapInput.SelectedSeats"]+=$(this).data("value")+i});n[$("[id$='CurrentMapKey']").attr("name")]=$("[name$='CurrentMapKey']").val();n[$("[id$='ActiveMapKey']").attr("name")]=$("[name$='ActiveMapKey']").val();n["revSeatMapInput.IsPartialSubmit"]="true";i=t.ApiUrl+"/SeatSelect";$.ajax({url:i,dataType:"text",data:n,type:"POST",success:function(n,i){i==="success"&&t.RefreshBookingSummary(n)},error:function(){}})},LowFareDateSelect:function(n,t){if((n===null||n===undefined)&&(t===null||t===undefined))return!1;var i=n+"|"+t;$("input#lowFareMarketDate"+n).val(i)},AvailabilityAjax:function(n,t,i,r){if((t===null||t===undefined)&&(n===null||n===undefined)&&(i===null||i===undefined)&&(r===null||r===undefined))return!1;var f=$(n).data("market-pair"),o=$(n).data("post-action"),s=$("#"+f),e=t+"|"+i,u={},h=$("#lowFareMarketDate0"),c=$("#lowFareMarketDate1");if(o=="True")return this.LowFarePost(t,i,!1),!1;$('[data-market-pair="'+f+'"]').removeClass("active");$(n).addClass("active");$("[data-arrival-station]").text($("[data-arrival-station]").text().split(",")[0]);$("[data-select-transition]").removeClass("hidden");u["AvailabilityAjax.LowFareMarketDate"]=e;u["AvailabilityAjax.Market"]=r;$("#lowFareMarketDate"+t).val(e);$.ajax({url:$("#AvailabilityAjaxUrl").data("url"),dataType:"html",type:"GET",data:u,success:function(n,t){t=="success"&&(s.html($(n).html()),$("[data-fly-option]")["fly-option"](),$("[data-select-transition]").addClass("hidden"),$('[data-trigger="hover"]').popover({html:!0}))}})},LowFarePost:function(n,t,i){if((n===null||n===undefined)&&(t===null||t===undefined))return!1;var r=n+"|"+t;$("input#lowFareMarketDate"+n).val(r);$("input#fromCalendar").val(i);$("form#LowFareFinderForm").submit()},ChooseNewCurrency:function(n){var t=$(n).val();$("input#newCurrencyCode").val(t);$("form#NewCurrencyCodeForm").submit()},SeatFlightSelect:function(n){$("#revSeatMapInput_ActiveMapKey").val(n)},CheckCreditType:function(n,t){var o=$(n).val().substr(0,1),i=$(n).val().substr(0,2),f=$(n).val().substr(0,4),r=$(n).val().substr(0,9),e,u;t.keyCode==32&&(e=$(n).val(),$(n).val(e.split(" ").join("").toString()));$("#ccFee").val("0").trigger("change");$("#perPaxPerSegFeePrice").val(0).trigger("change");$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val(0).trigger("change");o==4?($("#visa_radio").prop("checked",!0),$("#selectedpaymentMethod").val($("#visa_radio").val()),$("#ccFee").val($("#visa_radio").attr("fee")).trigger("change"),$("#perPaxPerSegFeePrice").val($("#visa_radio").attr("perpaxpersegfee")).trigger("change"),$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val($("#visa_radio").attr("waiveFee")).trigger("change")):$("#ms_radio").length!==0&&(r==514916114||r==514916115||r==540275523)?($("#ms_radio").prop("checked",!0),$("#selectedpaymentMethod").val($("#ms_radio").val()),$("#ccFee").val($("#ms_radio").attr("fee")).trigger("change"),$("#perPaxPerSegFeePrice").val($("#ms_radio").attr("perpaxpersegfee")).trigger("change"),$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val($("#ms_radio").attr("waiveFee")).trigger("change")):i==51||i==52||i==53||i==54||i==55||i==22||i==23||i==24||i==25||i==26||i==27?($("#mastercard_radio").prop("checked",!0),$("#selectedpaymentMethod").val($("#mastercard_radio").val()),$("#ccFee").val($("#mastercard_radio").attr("fee")).trigger("change"),$("#perPaxPerSegFeePrice").val($("#mastercard_radio").attr("perpaxpersegfee")).trigger("change"),$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val($("#mastercard_radio").attr("waiveFee")).trigger("change")):i==34||i==37?($("#express_radio").prop("checked",!0),$("#selectedpaymentMethod").val($("#express_radio").val()),$("#ccFee").val($("#express_radio").attr("fee")).trigger("change"),$("#perPaxPerSegFeePrice").val($("#express_radio").attr("perpaxpersegfee")).trigger("change"),$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val($("#express_radio").attr("waiveFee")).trigger("change")):$(n).val().substr(0,2)==35||f==2131||f==1800?($("#jcb_radio").prop("checked",!0),$("#selectedpaymentMethod").val($("#jcb_radio").val()),$("#ccFee").val($("#jcb_radio").attr("fee")).trigger("change"),$("#perPaxPerSegFeePrice").val($("#jcb_radio").attr("perpaxpersegfee")).trigger("change"),$("#convenienceFeeWaiver")&&$("#convenienceFeeWaiver").val($("#jcb_radio").attr("waiveFee")).trigger("change")):($("#selectedpaymentMethod").val(""),u=$('[name="ccType"]:checked'),u&&$(u).each(function(){$(this).prop("checked",!1)}))},CheckDccOffer:function(n){var t,i;$("div.dcc_currency").hide();t={};t["dccInlineOffer.PaymentMethodCode"]=$("#selectedpaymentMethod").val();t["dccInlineOffer.CreditCardNumber"]=$(n).val();i=$("#PaymentInit").data("dcc");$.ajax({url:i,dataType:"text",type:"POST",data:t,success:function(n,t){t=="success"&&($("div.dcc_currency #dccDynamOptions").html(n),$("div.dcc_currency #dccDynamOptions input").length>0&&$("div.dcc_currency").slideDown("slow"))}})},GetVoucherInfo:function(){var n=$("[data-voucher-number]"),t=$("[data-voucher-amount]"),u=$("[data-voucher-retrieve]"),r=$("[data-voucher-apply]"),i=$("[data-voucher-error-message]"),o=$("[data-voucher-content]"),s=$("[data-voucher-success]"),h=$(["data-member-voucher-amount"]),f,e;(i.addClass("hidden").find("div").html(""),r.addClass("hidden"),t.find("input").val(t.find("input").prop("defaultValue")),n.val().length!=0&&n.val()!="")&&(f={"voucherInput.Accept":!1,"voucherInput.VoucherCode":n.val()},e=$("#VoucherInit").data("vo"),$.ajax({url:e,dataType:"html",type:"POST",data:f,success:function(i,f){if(f=="success"){$("#voucherApplyInfo").html(i);var e=$("#voucherApplyInfo").find("input");u.removeClass("hidden");e.length>0&&e.attr("data-status")!="Error"?($(".voucherRedeamableAmmount").html(e.attr("data-voucherAmountString")),e.attr("data-status")=="Expired"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.expired_error):e.attr("data-status")=="Applied"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.voucher_applied):e.attr("data-status")=="Void"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.void_error):e.attr("data-status")=="Redeemed"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.redeemed_error):e.attr("data-status")=="VoucherNameMismatch"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.paxname_error):e.attr("data-status")=="VoucherNotFound"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.notfound_error):e.attr("data-status")=="VoucherMarketRestrictions"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.flightroute_error):e.attr("data-status")=="VoucherTravelDateRestrictions"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.dates_error):e.attr("data-status")=="VoucherBasisCodeRestrictions"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.basiscode_error):e.attr("data-status")=="MemberCustomerNumberMismatch"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.customer_number_error):e.attr("data-status")=="SCBVoucherLimitError"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.scb_voucher_limit_error):e.attr("data-status")=="SCBVoucherNotValid"?ShowVoucherError(l10n.en.paymentValidation.voucherMessages.scb_voucher_not_valid):(e.attr("data-status")=="AppliedPartial"&&(ShowVoucherError(l10n.en.paymentValidation.voucherMessages.fareonly_note),n.removeClass("input-error")),r.removeClass("hidden"),u.addClass("hidden"),t.removeClass("hidden").find("input").val(String.format("{0:#,##0.##}",parseFloat(e.attr("data-voucheramount")))),$(".voucher-amount").html(e.attr("data-voucherAmountString")),$("[data-voucherapply-amount]").html(e.attr("data-voucherAmountString")),e.attr("data-memberVoucherAmount")&&t.find("input").val(e.attr("data-memberVoucherAmount")+"% Discount"))):(n.val(""),ShowVoucherError(l10n.en.paymentValidation.voucherMessages.voucher_condition).show())}},error:function(){n.val("");i.removeClass("hidden").find("div").html(l10n.en.paymentValidation.voucherMessages.voucher_condition).show();r.addClass("hidden");u.removeClass("hidden")}}),ShowVoucherError=function(u){r.addClass("hidden");t.addClass("hidden");i.removeClass("hidden");n.addClass("input-error");i.find("div").html(u);var f=$("html, body"),e=$("header .logo").outerHeight();f.stop().animate({scrollTop:i.offset().top-e},500)})},ApplyVoucher:function(){var n=$("[data-voucher-number]"),t=$("[data-voucher-amount]"),o=$("[data-voucher-retrieve]"),r=$("[data-voucher-apply]"),i=$("[data-voucher-error-message]"),s=$("[data-voucher-content]"),e=$("[data-voucher-success]"),u,f;(vReuse=$("[data-voucher-reuse]"),i.addClass("hidden").find("div").html(""),n.removeClass("input-error"),n.val().length!=0&&n.val()!="")&&(u={"voucherInput.Accept":!0,"voucherInput.VoucherCode":$("#voucherApplyInfo").find("input").attr("data-voucherCode")},f=$("#VoucherInit").data("vo"),$.ajax({url:f,dataType:"html",type:"POST",data:u,success:function(u,f){var o;if($(u).data("status")=="VoucherNotApplied"){e.find(".voucher-applied").addClass("hidden");i.removeClass("hidden");i.find("div").html(l10n.en.paymentValidation.voucherMessages.voucher_not_applied);return}if(f=="success"){if($("#voucherApplyInfo").html(u),o=$("#voucherApplyInfo").find("input"),o.length>0){var h=parseFloat($("#ccFee").val()),s=parseFloat(o.attr("data-totalAmountDue")),c=String.format("{0:#,##0.##}",s+h);$(".totalAmountDue, .totalOutstanding").find("span").html(c).attr("price",s+h);$(".totalPaid").html(o.attr("data-totalPaidString"));o.attr("data-memberVoucherAmountString")&&$(".voucher-amount").html(o.attr("data-memberVoucherAmountString"));o.attr("data-allowedbinnumbers").length>0&&($("#AllowedCardBinNumbers").val($("#AllowedCardBinNumbers").val()+o.attr("data-allowedbinnumbers")),$("#AllowedCardBinNumbers").attr("data-message",o.attr("data-custommessage")))}$(".slick-slide").each(function(){var n=$(this).find("a");n.attr("aria-controls")!="voucher-tab"&&n.attr("aria-controls")!="credit-card-tab"&&n.hide();n.attr("aria-controls")!="voucher-tab"&&n.attr("aria-controls")=="credit-card-tab"&&s==0&&n.hide()})}t.find("input").val(t.find("input").prop("defaultValue"));n.find("input").val("");r.addClass("hidden");o.attr("data-status")=="Applied"&&$(".vouchererror").html("Voucher applied").show();s==0&&vReuse.hide()},error:function(){t.find("input").val("");n.find("input").val("");r.addClass("hidden")}}),$("#voucherApplyInfo").find("input").length>0&&$("#voucherApplyInfo").find("input").remove())},RemoveAllSeats:function(){$("#revSeatMapInput_ClearAutoAssignedSeats").val("True");$("#revSeatMapInput_ClearAutoAssignedSeatsSegment").val("");$("form#SeatMapInput, form#ManageSeats, form#WciAddSeat").submit()},RefreshBookingSummary:function(n){$("div.booking-edit__content").html($(n).filter("main").find("div.booking-edit__content").html());$("#popup__flight__details").html($(n).filter("footer").find("#popup__flight__details").html());var t=$(n).filter("header"),i=$(t).html(),r=$(n).filter("[data-bookingsummary-stations]").html();$("[data-bookingsummary-total]").html(i).parent().attr("title",t.attr("data-price-title"));$("[data-bookingsummary-stations]").html(r);$("[data-popup-ui]",$("div.booking-edit__content"))["popup-ui"]();$("[data-popover-info]")["popover-info"]&&$("[data-popover-info]")["popover-info"]()},isNotScootMarket:function(){var e=$("#city_pairs_data"),o=e.length?JSON.parse(e.html()):[],r="",f="",s="",h="",t,u;if($("#header-form-return").is(":visible")?(r=$("[data-trip-rt-from]").val(),f=$("[data-trip-rt-to]").val()):$("#header-form-oneway").is(":visible")?(r=$("[data-trip-ow-from]").val(),f=$("[data-trip-ow-to]").val()):(r=$("[data-trip-mc-from1]").val(),f=$("[data-trip-mc-to1]").val(),s=$("[data-trip-mc-from2]").val(),h=$("[data-trip-mc-to2]").val()),$("#header-form-return").is(":visible")||$("#header-form-oneway").is(":visible")){for(t=o[0],i=0;i<t.length;i++)for(j=0;j<t[i].markets.length;j++)if(t[i].markets[j].origin.station_code==r){if(t[i].markets[j].origin.is_scoot_market==!1)return!0;for(n=0;n<t[i].markets[j].destinations.length;n++)if(u=t[i].markets[j].destinations[n].destinations.filter(function(n){return n.station_code==f}),u.length>0)return u[0].is_scoot_market==!1}}else for(t=o[1],i=0;i<t.length;i++)for(j=0;j<t[i].markets.length;j++)if(t[i].markets[j].origin.station_code==r||t[i].markets[j].origin.station_code==s){if(t[i].markets[j].origin.is_scoot_market==!1)return!0;for(n=0;n<t[i].markets[j].destinations.length;n++)if(u=t[i].markets[j].origin.station_code==r?t[i].markets[j].destinations[n].destinations.filter(function(n){return n.station_code==f}):t[i].markets[j].destinations[n].destinations.filter(function(n){return n.station_code==h}),u.length>0)return u[0].is_scoot_market==!1}return!1},SendBoardingPass:function(){var t,n;if($("#email").val()==""||$("#email").val()!=$("#confirmEmail").val()){$("#email").closest("form").submit();return}t={};t.email=$("#email").val();n=$("#SendEmailBP");$(n).html($(n).data("waittext")).attr("disabled",!0);$.ajax({type:"GET",dataType:"text",url:$(n).data("apiurl"),data:t,success:function(n,t){if(t=="success"){$("#btnHiddenTrigger").click();$(".mfp-container").on("click",function(){location.reload()})}},error:function(){$(n).html($(n).data("defaulttext")).removeAttr("disabled")}})}};$(document).ready(function(){ScootBook.init();ScootBook.CheckIfCalendar()}),function(n){"use strict";function i(i,r){this.element=n(i);this.options=n.extend({},n.fn[t].defaults,this.element.data(),r);this.init()}var t="sort-flights";i.prototype={init:function(){this.sortOptions={"fare-asc":"fare","fare-desc":"fare","duration-asc":"duration","departure-asc":"departure","departure-desc":"departure","arrival-asc":"arrival","arrival-desc":"arrival"};this.addEventListeners()},addEventListeners:function(){var n=this.element;n.on("change",this.onSort.bind(this))},getFlightsArray:function(t,i){var o=t.find(".flight-results__result"),s=this.sortOptions[i],r,f,u,e=[];return n.each(o,function(){u=n(this);r=u.attr("data-sort-options");r=r.replace(/'/g,'"');f=JSON.parse(r);e.push({element:u,value:f[s]})}),e},onSort:function(){var i=this.element.val(),f=n(this.options.sortFlights),t,r,u;u=i.indexOf("asc")!==-1;t=this.getFlightsArray(f,i);t.sort(function(n,t){return u?n.value-t.value:t.value-n.value});n.each(t,function(n,t){r=t.element;r.css("order",n)})},destroy:function(){n.removeData(this.element[0],t)}};n.fn[t]=function(r,u){return this.each(function(){var f=n.data(this,t);f?f[r]&&f[r](u):n.data(this,t,new i(this,r))})};n.fn[t].defaults={};n(function(){n("[data-"+t+"]")[t]()})}(jQuery,window);var sffjs=function(){function u(n){return n<10?t+n:n}function v(n){return n!==null&&n!==nt}function f(n,t){return isNaN(n)?t:n}function k(n){for(var t in b)n[t]=n[t]||b[t];return n.f=n.f||n.D+" "+n.t,n.F=n.F||n.D+" "+n.T,n.g=n.g||n.d+" "+n.t,n.G=n.G||n.d+" "+n.T,n.m=n.M,n.y=n.Y,n}function y(){p.LC=n=c&&(a[c[s]()]||a[c.split("-")[0][s]()])||tt}function d(n,t){var i=Math.pow(10,t||0);return""+Math.round(Math.abs(n)*i)/i}function g(n){var t=n.indexOf(".");return t<0?n.length:t}function it(n){var t=n.indexOf(".");return t<0?0:n.length-t-1}function rt(n,t){if(v(t)){var r=/(\.([a-zA-Z_$]\w+)|\[(\d+)\])/g,i=/^[a-zA-Z_$]\w+/.exec(n);for(t=t[i[0]];v(t)&&(i=r.exec(n));)t=t[i[2]||o(i[3])]}return t}function i(n,t){for(var i=0,r=t.length;i<r;i++)n.push(t.charAt(i)),n.g>1&&n.g--%3==1&&n.push(n.t)}function e(n,t){return n.substr(0,(n.length+1-(t||0))/2)}function ut(n,t,i,r){var u,f=parseInt(n,10),s,e="";if(isNaN(f))u=rt(n,r[1]);else{if(f>r.length-2)throw"Missing argument";u=r[f+1]}for(u=v(u)?u.__Format?u.__Format(i):""+u:"",t=o(t)||0,s=Math.abs(t)-u.length;s-->0;)e+=" ";return t<0?u+e:e+u}function r(n,r,u,f,e,o){var h,c,s=[];for(s.t=o,n<0&&s.push("-"),n=d(n,f),h=s.g=g(n),c=it(n),r-=h;r-->0;)i(s,t);if(i(s,n.substr(0,h)),u||c)for(s.push(e),i(s,n.substr(h+1)),u-=c;u-->0;)i(s,t);return s.join("")}function ft(n,r,u,f){for(var y=0,c=-1,l=-1,p=0,w=-1,a=0,b=1,e,h,k=r.length,v,s=[],o=0;o<k;o++)if(e=r.charAt(o),e=="'"||e=='"'){if(o=r.indexOf(e,o+1),o<0)break}else e=="\\"?o++:((e==t||e=="#")&&(p+=a,e==t&&(a?w=p:c<0&&(c=y)),y+=!a),a=a||e==".");for(c=c<0?1:y-c,n<0&&s.push("-"),n=d(n,p),l=g(n),o=l-y,s.g=Math.max(l,c),s.t=f,inString=0,h=0;h<k;h++)if(e=r.charAt(h),e=="'"||e=='"'){if(v=r.indexOf(e,h+1),s.push(r.substring(h+1,v<0?r.length:v)),v<0)break;h=v}else e=="\\"?(s.push(r.charAt(h+1)),h++):e=="#"||e==t?(o<l?(o>=0?(b&&i(s,n.substr(0,o)),i(s,n.charAt(o))):o>=l-c&&i(s,t),b=0):(w-->0||o<n.length)&&i(s,o>=n.length?t:n.charAt(o)),o++):e=="."?(n.length>++o||w>0)&&s.push(u):e!==","&&s.push(e);return s.join("")}var p={version:"1.09",setCulture:function(n){c=n;y()},registerCulture:function(n){a[n.name[s]()]=k(n);y()}},o=Number,w=String,t="0",s="toUpperCase",nt,b={name:"",d:"MM/dd/yyyy",D:"dddd, dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",M:"MMMM dd",Y:"yyyy MMMM",s:"yyyy-MM-ddTHH:mm:ss",_M:["January","February","March","April","May","June","July","August","September","October","November","December"],_D:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_r:".",_t:",",_c:"#,0.00",_ct:",",_cr:".",_am:"AM",_pm:"PM"},tt=k({}),n,c=navigator.systemLanguage||navigator.language||"",a={},h,l;o.prototype.__Format=function(i){var e=o(this),c=n._r,v=n._t,y,d,u,h,l,p,g,w,b,a,k;if(!isFinite(e))return""+e;if(!i&&i!==t)return r(e,0,0,10,c);if(y=i.match(/^([a-zA-Z])(\d*)$/),y){d=y[1][s]();u=parseInt(y[2],10);u=u>15?15:u;switch(d){case"D":return r(e,f(u,1),0,0);case"F":v="";case"N":return r(e,1,f(u,2),f(u,2),c,v);case"G":case"E":for(h=0,l=Math.abs(e);l>=10;)l/=10,h++;while(l<1)l*=10,h--;if(p=y[1],g=3,d=="G"){if(h>-5&&(!u||h<u))return w=u?u-(h>0?h+1:1):0,b=u?u-(h>0?h+1:1):10,r(e,1,w,b,c);p=p=="G"?"E":"e";g=2;w=(u||1)-1;b=(u||11)-1}else w=b=f(u,6);return h>=0&&(p+="+"),e<0&&(l*=-1),r(""+l,1,w,b,c,v)+p+r(h,g,0);case"P":return r(e*100,1,f(u,2),f(u,2),c,v)+" %";case"X":for(a=Math.round(e).toString(16),y[1]=="X"&&(a=a[s]()),u-=a.length;u-->0;)a=t+a;return a;case"C":i=n._c;c=n._cr;v=n._ct;break;case"R":return""+e}}return i.indexOf(",.")!==-1&&(e/=1e3),i.indexOf("%")!==-1&&(e*=100),k=i.split(";"),e<0&&k.length>1?(e*=-1,i=k[1]):i=k[!e&&k.length>2?2:0],ft(e,i,c,i.match(/^[^\.]*[0#],[0#]/)&&v)};Date.prototype.__Format=function(t){var i=this,o=i.getFullYear(),f=i.getMonth(),s=i.getDate(),e=i.getDay(),r=i.getHours(),h=i.getMinutes(),c=i.getSeconds();return t=t||"G",t.length==1&&(t=n[t]||t),t.replace(/(\\.|'[^']*'|"[^"]*"|d{1,4}|M{1,4}|yyyy|yy|HH?|hh?|mm?|ss?|tt?)/g,function(t){return t=="dddd"?n._D[e]:t=="ddd"?n._d?n._d[e]:n._D[e].substr(0,3):t=="dd"?u(s):t=="d"?s:t=="MMMM"?n._M[f]:t=="MMM"?n._m?n._m[f]:n._M[f].substr(0,3):t=="MM"?u(f+1):t=="M"?f+1:t=="yyyy"?o:t=="yy"?(""+o).substr(2):t=="HH"?u(r):t=="H"?r:t=="hh"?u((r-1)%12+1):t=="h"?(r-1)%12+1:t=="mm"?u(h):t=="m"?h:t=="ss"?u(c):t=="s"?c:t=="tt"?r<12?n._am:n._pm:t=="t"?(r<12?n._am:n._pm).charAt(0):t.substr(1,t.length-1-(t.charAt(0)!="\\"))})};w.__Format=function(n){var t=arguments;return n.replace(/(\{+)((\d+|[a-zA-Z_$]\w+(?:\.[a-zA-Z_$]\w+|\[\d+\])*)(?:\,(-?\d*))?(?:\:([^\}]*))?)(\}+)|(\{+)|(\}+)/g,function(){var n=arguments;return n[7]?e(n[7]):n[8]?e(n[8]):n[1].length%2==0||n[6].length%2==0?e(n[1])+n[2]+e(n[6]):e(n[1],1)+ut(n[3],n[4],n[5],t)+e(n[6],1)})};h=[Date.prototype,o.prototype,w];for(l in h)h[l].format=h[l].format||h[l].__Format;return y(),p}(),msf=sffjs